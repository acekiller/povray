<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Normals</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_191"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_098.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_100.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>3.9.2&nbsp;&nbsp;Normals</h3>

  <p>Objects in POV-Ray have very smooth surfaces. This is not very realistic
  so there are several ways to disturb the smoothness of an object by
  perturbing the surface normal. The surface normal is the vector that is
  perpendicular to the angle of the surface. By changing this normal the
  surface can be made to appear bumpy, wrinkled or any of the many patterns
  available. Let's try a couple of them.</p>

</div>

<div class="divh4">
<a name="target_192"></a>
<h4>3.9.2.1&nbsp;&nbsp;Using Basic Normal Modifiers</h4>

  <p>We comment out the planetoid sphere for now and, at the bottom of the
  file, create a new sphere with a simple, single color texture.</p>
<pre>
  sphere {
    &lt;0,0,0&gt;, 1
    pigment { Gray75 }
    normal { bumps 1 scale .2 }
  }
</pre>

  <p>Here we have added a <code>normal</code> block in addition to the <code>
  pigment</code> block (note that these do not have to be included in a <code>
  texture</code> block unless they need to be transformed together or need to
  be part of a layered texture). We render this to see what it looks like. Now,
  one at a time, we substitute for the keyword <code><a href="povdoc_216.html#target_1097">bumps</a></code> the following
  keywords: <code><a href="povdoc_216.html#target_1104">dents</a></code>, <code><a href="povdoc_216.html#target_1142">wrinkles</a></code>,
  <code><a href="povdoc_216.html#target_1132">ripples</a></code> and <code><a href="povdoc_216.html#target_1140">waves</a></code>
  (we can also use any of the patterns listed in &quot;<a href="povdoc_216.html#target_1089">Patterns</a>&quot;).
  We render each to see what they look like. We play around with the float value that follows the
  keyword. We also experiment with the scale value.</p><p>
   For added interest, we change the plane texture to a single color with a
  normal as follows.</p>
<pre>
  plane {
    y, -1.5
    pigment { color rgb &lt;.65, .45, .35&gt; }
    normal { dents .75 scale .25 }
  }
</pre>

</div>

<div class="divh4">
<a name="target_193"></a>
<h4>3.9.2.2&nbsp;&nbsp;Blending Normals</h4>
<a name="target_194"></a>
<a name="target_195"></a>

  <p>Normals can be layered similar to pigments but the results can be
  unexpected. Let's try that now by editing the sphere as follows.</p>
<pre>
  sphere {
    &lt;0,0,0&gt;, 1
    pigment { Gray75 }
      normal { radial frequency 10 }
      normal { gradient y scale .2 }
  }
</pre>

  <p>As we can see, the resulting pattern is neither a radial nor a gradient.
  It is instead the result of first calculating a radial pattern and then
  calculating a gradient pattern. The results are simply additive. This can be
  difficult to control so POV-Ray gives the user other ways to blend
  normals.</p><p>
   One way is to use normal maps. A normal map works the same way as the
  pigment map we used earlier. Let's change our sphere texture as
  follows.</p>
<pre>
  sphere {
    &lt;0,0,0&gt;, 1
    pigment { Gray75 }
    normal {
      gradient y
      frequency 3
      turbulence .5
      normal_map {
        [0.00 granite]
        [0.25 spotted turbulence .35]
        [0.50 marble turbulence .5]
        [0.75 bozo turbulence .25]
        [1.00 granite]
      }
    }
  }
</pre>

  <p>Rendering this we see that the sphere now has a very irregular bumpy
  surface. The gradient pattern type separates the normals into bands but they
  are turbulated, giving the surface a chaotic appearance. But this gives us an
  idea.</p><p>
   Suppose we use the same pattern for a normal map that we used to create the
  oceans on our planetoid and applied it to the land areas. Does it follow that
  if we use the same pattern and modifiers on a sphere the same size that the
  shape of the pattern would be the same? Wouldn't that make the land areas
  bumpy while leaving the oceans smooth? Let's try it. First, let's
  render the two spheres side-by-side so we can see if the pattern is indeed
  the same. We un-comment the planetoid sphere and make the following
  changes.</p>
<pre>
  sphere {
    &lt;0,0,0&gt;, 1
    texture { LandArea }
    texture { OceanArea }
    //texture { CloudArea }  // &lt;-comment this out
    translate -x             // &lt;- add this transformation
  }
</pre>

  <p>Now we change the gray sphere as follows.</p>
<pre>
  sphere {
    &lt;0,0,0&gt;, 1
    pigment { Gray75 }
    normal {
      bozo
      turbulence .5
      lambda 2
      normal_map {
        [0.4 dents .15 scale .01]
        [0.6 agate turbulence 1]
        [1.0 dents .15 scale .01]
      }
    }
    translate x // &lt;- add this transformation
  }
</pre>

  <p>We render this to see if the pattern is the same. We see that indeed it
  is. So let's comment out the gray sphere and add the <code>normal</code>
  block it contains to the land area texture of our planetoid. We remove the
  transformations so that the planetoid is centered in the scene again.</p>
<pre>
  #declare LandArea = texture {
    pigment {
      agate
      turbulence 1
      lambda 1.5
      omega .8
      octaves 8
      color_map {
        [0.00 color rgb &lt;.5, .25, .15&gt;]
        [0.33 color rgb &lt;.1, .5, .4&gt;]
        [0.86 color rgb &lt;.6, .3, .1&gt;]
        [1.00 color rgb &lt;.5, .25, .15&gt;]
      }
    }
    normal {
      bozo
      turbulence .5
      lambda 2
      normal_map {
        [0.4 dents .15 scale .01]
        [0.6 agate turbulence 1]
        [1.0 dents .15 scale .01]
      }
    }
  }
</pre>

  <p>Looking at the resulting image we see that indeed our idea works! The land
  areas are bumpy while the oceans are smooth. We add the cloud layer back in
  and our planetoid is complete.</p><p>
   There is much more that we did not cover here due to space constraints. On
  our own, we should take the time to explore slope maps, average and bump
  maps.</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_098.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_100.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
