<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Fog</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_1212"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_224.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_226.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>6.9.3&nbsp;&nbsp;Fog</h3>

  <p>If it is not necessary for light beams to interact with atmospheric media,
  then <code>fog</code> may be a faster way to simulate haze or fog. This
  feature artificially adds color to every pixel based on the distance the ray
  has traveled. The syntax for fog is:</p>
<pre>
FOG:
    fog { [FOG_IDENTIFIER] [FOG_ITEMS...] }
FOG_ITEMS:
    fog_type Fog_Type | distance Distance | COLOR | 
    turbulence &lt;Turbulence&gt; | turb_depth Turb_Depth |
    omega Omega | lambda Lambda | octaves Octaves |
    fog_offset Fog_Offset | fog_alt Fog_Alt | 
    up &lt;Fog_Up&gt; | TRANSFORMATION
</pre>

<p>
Fog default values:
<a name="target_1213"></a>
<pre>
lambda     : 2.0
fog_type   : 1
fog_offset : 0.0
fog_alt    : 0.0
octaves    : 6
omega      : 0.5 
turbulence : &lt;0,0,0&gt;
turb_depth : 0.5
up         : &lt;0,1,0&gt;
</pre>
</p>

<a name="target_1214"></a>

  <p>Currently there are two fog types, the default <code>fog_type 1</code> is
  a constant fog and <code>fog_type 2</code> is ground fog. The constant fog
  has a constant density everywhere while the ground fog has a constant density
  for all heights below a given point on the up axis and thins out along this
  axis.</p><p>
   The color of a pixel with an intersection depth <em>d</em> is calculated
  by</p><p>
  <em> PIXEL_COLOR = exp(-d/D) * OBJECT_COLOR + (1-exp(-d/D)) *
  FOG_COLOR</em></p><p>
<a name="target_1215"></a>

<a name="target_1216"></a>
   where <em>D</em> is the specified value of the required fog <code>distance</code>
  keyword. At depth 0 the final color is the object's color. If the 
  intersection depth equals the fog distance the final color consists of 64% 
  of the object's color and 36% of the fog's color.</p>
  <p class="Note"><strong>Note:</strong> for this equation, a distance of zero is undefined.  In 
  practice, povray will treat this value as &quot;fog is off&quot;.  To use an
  extremely thick fog, use a small nonzero number such as 1e-6 or 1e-10.
  </p>
  <p>
<a name="target_1217"></a>

   For ground fog, the height below which the fog has constant density is
  specified by the <code>fog_offset</code> keyword. The <code>fog_alt</code>
  keyword is used to specify the rate by which the fog fades away. The default
  values for both are 0.0 so be sure to specify them if ground fog is used. At
  an altitude of <em><code> Fog_Offset+Fog_Alt</code></em> the fog has a
  density of 25%. The density of the fog at height less than or equal to 
  <em>Fog_Offset</em> is 1.0 and for height larger than than <em>Fog_Offset</em>
  is calculated by:</p><p>
   <em> <code> 1/(1 + (y - Fog_Offset) / Fog_Alt) ^2</code></em></p><p>
   The total density along a ray is calculated by integrating from the height
  of the starting point to the height of the end point.</p><p>
   The optional <code>up</code> vector specifies a direction pointing up,
  generally the same as the camera's up vector. All calculations done
  during the ground fog evaluation are done relative to this up vector, i. e.
  the actual heights are calculated along this vector. The up vector can also
  be modified using any of the known transformations described in
  &quot;<a href="povdoc_175.html#target_701">Transformations</a>&quot;. Though it may not be a good idea to scale the up
  vector - the results are hardly predictable - it is quite useful to be able
  to rotate it. You should also note that translations do not affect the up
  direction (and thus don't affect the fog).</p><p>
   The required fog color has three purposes. First it defines the color to be
  used in blending the fog and the background. Second it is used to specify a
  translucency threshold. By using a transmittance larger than zero one can
  make sure that at least that amount of light will be seen through the fog.
  With a transmittance of 0.3 you'll see at least 30% of the background.
  Third it can be used to make a filtering fog. With a filter value larger than
  zero the amount of background light given by the filter value will be
  multiplied with the fog color. A filter value of 0.7 will lead to a fog that
  filters 70% of the background light and leaves 30% unfiltered.</p><p>
  Fogs may be layered. That is, you can apply as many layers of fog as you
  like. Generally this is most effective if each layer is a ground fog of
  different color, altitude and with different turbulence values. To use
  multiple layers of fogs, just add all of them to the scene.</p><p>
<a name="target_1218"></a>

   You may optionally stir up the fog by adding turbulence. The <code>turbulence</code>
  keyword may be followed by a float or vector to specify an amount of 
  turbulence to be used. The <code>omega</code>, <code>lambda</code> and 
  <code> octaves</code> turbulence parameters may also be specified. See 
  section &quot;<a href="povdoc_217.html#target_1143">Pattern Modifiers</a>&quot; for details on all of these 
  turbulence parameters.</p><p>
<a name="target_1219"></a>

   Additionally the fog turbulence may be scaled along the direction of the
  viewing ray using the <code>turb_depth</code> amount. Typical values are from
  0.0 to 1.0 or more. The default value is 0.5 but any float value may be
  used.</p>
  <p class="Note"><strong>Note:</strong> the fog feature will not work if the camera is inside a
  non-hollow object (see section &quot;<a href="povdoc_198.html#target_984">Empty and Solid Objects</a>&quot;
  for a detailed explanation).</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_224.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_226.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
