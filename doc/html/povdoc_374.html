<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>What about loop types other than simple for-loops?</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_1696"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_373.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_375.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>9.7.5&nbsp;&nbsp;What about loop types other than simple for-loops?</h3>

<p>As POV-Ray doesn't care what the condition is and what we are using to
make that condition, we can use the while-loop in many other ways.

</p><p>For example, this is a typical use of the while-loop which is not a
simple for-loop:

<pre>
#declare S = seed(0);
#declare Point = &lt;2*rand(S)-1, 2*rand(S)-1, 2*rand(S)-1&gt;;
#while(vlength(Point) &gt; 1)
  #declare Point = &lt;2*rand(S)-1, 2*rand(S)-1, 2*rand(S)-1&gt;;
#end
</pre>

</p><p>What we are doing here is this: Take a random point between
&lt;-1, -1, -1&gt; and &lt;1, 1, 1&gt; and if it's not inside the unit sphere
take another random point in that range. Do this until we get a point inside
the unit sphere.

</p><p>This is not an unrealistic example since it's very handy and I have used
this type of loops many times.

</p><p>As we see, this has nothing to do with an ordinary for-loop:

<ul>
 <li>It doesn't have any &quot;index&quot; value which gets consecutive values during
     the loop.</li>
 <li>We don't know how many times it will loop. In this
     case it loops a random number of times.</li>
 <li>For-loops are usually used to get a series of things (eg. objects). At
     each loop another instance of that thing is created. Here, however,
     we are only interested in the value that results <b>after</b> the loop,
     not the values inside it.</li>
</ul>

</p><p>As we can see, a while-loop can also be used for a task of type
&quot;calculate a value or some values until the result is inside a specified
range&quot; (among many other tasks).


</p><p>By the way, there's a variant of this kind of loop where the task is:
&quot;Calculate a value until the result is inside a specified range, but make
only a certain number of tries. If the value doesn't get inside that range
after that number of tries, stop trying&quot;. This is used when there's a
possibility for the loop for going on forever.

</p><p>In the above example about the point inside the unit sphere we don't need
this because the random point will surely hit the inside of the sphere at some
time. In some other situations, however, we can't be so sure.

</p><p>In this case we need a regular index variable to count the number of
loops. If we have made that amount of loops then we stop.

</p><p>Suppose that we wanted to modify our point searching program to be
completely safe and to try only up to 10 times. If the point doesn't hit
the inside of the sphere after 10 tries, we just give up and take the
point &lt;0,0,0&gt;.

<pre>
#declare S = seed(0);
#declare Point = &lt;2*rand(S)-1, 2*rand(S)-1, 2*rand(S)-1&gt;;
#declare Index = 1;
#while(Index &lt;= 10 & vlength(Point) &gt; 1)
  #declare Point = &lt;2*rand(S)-1, 2*rand(S)-1, 2*rand(S)-1&gt;;
  #declare Index = Index + 1;
#end

#if(vlength(Point) &gt; 1)
  #declare Point = &lt;0,0,0&gt;
#end
</pre>

</p><p>What did we do?

<ul>
 <li>We added an 'Index' value which counts the amount of loops gone so far.
     It's quite similar to the index loop of a simple for-loop.</li>
 <li>We added an extra condition to the while-loop: Besides testing that
     the point is outside the unit sphere it also tests that our index
     variable has not bailed out. So now there are two conditions for the
     loop to continue: The 'Index' value must be less or equal to 10
     <b>and</b> the 'Point' has to be outside the unit sphere. If either one
     of them fails, the loop is ended.</li>
 <li>Then we check if the point is still outside the unit sphere. If it is,
     we just take &lt;0,0,0&gt;.</li>
</ul>

</p><p>Btw, sometimes it's not convenient to make the test again in the #if
statement. There's another way of determining whether the loop bailed out
without successful termination or not: Since the loop ends when the 'Index'
gets the value 11, we can use this to test the successfulness of the loop:

<pre>
#if(Index = 11)
  (loop was not successful)
#end
</pre>
</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_373.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_375.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
