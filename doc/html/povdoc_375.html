<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>What about nested loops?</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_1697"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_374.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_376.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>9.7.6&nbsp;&nbsp;What about nested loops?</h3>

<p>Even when one masters simple loops, nested loops can be a frightening
thing (or at least hard to understand).

</p><p>Nested loops are used for example for creating a 2D array of objects
(with rows and columns of objects), etc. For example if you want to create
a 10x20 array of spheres in your scene, a nested loop is the tool for it.

</p><p>There's nothing special about nested loops. You only have to pay
attention to where you initialize and update your index variables.

</p><p>Let's recall the form of a simple for-loop:

<pre>
#declare Index = initial_value;
#while(Index &lt;= final_value)

  [Something here]

  #declare Index = Index + index_step;
#end
</pre>

</p><p>The [Something here] part can be anything. If it's another while-loop,
then we have nested loops. The inner loop should have the same structure
as the outer one.

</p><p>Note that proper indentation helps us distinguishing between the loops.
It's always a good idea to use a good indentation scheme:

<pre>
#declare Index1 = initial_value1;
#while(Index1 &lt;= final_value1)

   #declare Index2 = initial_value2;
   #while(Index2 &lt;= final_value2)

      [Something here]

      #declare Index2 = Index2 + index2_step;
   #end

   #declare Index1 = Index1 + index1_step;
#end
</pre>

</p><p>It's a common mistake for beginners to break this structure. For example
it's common to declare the 'Index2' before the first #while. This breaks
the for-loop structure and thus doesn't work. If you follow step by step
what POV-Ray does, as explained earlier, you will see why it doesn't work.
Don't mix the structures of the inner and the outer loops together or your
code will simply not work as expected.

</p><p>So, if we want to make our 10x20 array of spheres, it will look like this:

<pre>
#declare Index1 = 0;
#while(Index1 &lt;= 9)

   #declare Index2 = 0;
   #while(Index2 &lt;= 19)

      sphere { &lt;Index1, Index2, 0&gt;, .5 }

      #declare Index2 = Index2 + 1;
   #end

   #declare Index1 = Index1 + 1;
#end
</pre>

</p><p>Note how we now start from 0 and continue to 9 in the outer loop and
from 0 to 19 in the inner loop. This has been done to get the sphere array
start from the origin (instead of starting from &lt;1, 1, 0&gt;). Of course
we could have made the 'Index1' and 'Index2' go from 1 to 10 and from 1 to
20 respectively and then created the sphere in this way:

<pre>
  sphere { &lt;Index1-1, Index2-1, 0&gt;, .5 }
</pre>

</p><p>Although you should not mix the loop structures together, you can perfectly
use the values of the outer loop in the inner loop (eg. in its condition).
For example, if we wanted to create a triangular array of spheres instead
of a rectangular one (that is, we create only half of the spheres), we could
have made the inner #while like this:

<pre>
  #while(Index2 &lt; Index1*2)
</pre>

</p><p>('Index2' will go from 0 to the value of 'Index1' multiplied by 2.)

</p><p>There's no reason why we should limit ourselves to just two nested loops.
There's virtually no limit how many loops you can nest. For example, if
we wanted to create a box-shape filled by spheres rows, colums and depth,
we just make three nested loops, one for the x-axis, another for the y-axis
and the third for the z-axis.
</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_374.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_376.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
