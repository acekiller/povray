<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Clock Dependant Variables And Multi-Stage Animations</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_244"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_118.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_120.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>3.12.2&nbsp;&nbsp;Clock Dependant Variables And Multi-Stage Animations</h3>

  <p>Okay, what if we wanted the ball to roll left to right for the first half
  of the animation, then change direction 135 degrees and roll right to left,
  and toward the back of the scene. We would need to make use of POV-Ray's
  new conditional rendering directives, and test the clock value to determine
  when we reach the halfway point, then start rendering a different clock
  dependant sequence. But our goal, as above, it to be working in each stage
  with a variable in the range of 0 to 1 (normalized) because this makes the
  math so much cleaner to work with when we have to control multiple aspects
  during animation. So let's assume we keep the same camera, light, and
  plane, and let the clock run from 0 to 2! Now, replace the single sphere
  declaration with the following...</p>
<pre>
  #if ( clock &lt;= 1 )
    sphere { &lt;0, 0, 0&gt; , 1
      pigment {
        gradient x
        color_map {
          [0.0 Blue  ]
          [0.5 Blue  ]
          [0.5 White ]
          [1.0 White ]
        }
        scale .25
      }
      rotate &lt;0, 0, -clock*360&gt;
      translate &lt;-pi, 1, 0&gt;
      translate &lt;2*pi*clock, 0, 0&gt;
    }
  #else
    // (if clock is &gt; 1, we're on the second phase)
    // we still want to work with  a value from 0 - 1
    #declare ElseClock = clock - 1;
    sphere { &lt;0, 0, 0&gt; , 1
      pigment {
        gradient x
        color_map {
          [0.0 Blue  ]
          [0.5 Blue  ]
          [0.5 White ]
          [1.0 White ]
        }
        scale .25
      }
      rotate &lt;0, 0, ElseClock*360&gt;
      translate &lt;-2*pi*ElseClock, 0, 0&gt;
      rotate &lt;0, 45, 0&gt;
      translate &lt;pi, 1, 0&gt;
    }
  #end
</pre>

  <p>If we spotted the fact that this will cause the ball to do an unrealistic
  <em>snap turn</em> when changing direction, bonus points for us - we're a
  born animator. However, for the simplicity of the example, let's ignore
  that for now. It will be easy enough to fix in the real world, once we
  examine how the existing code works.</p><p>
   All we did differently was assume that the clock would run 0 to 2, and that
  we wanted to be working with a normalized value instead. So when the clock
  goes over 1.0, POV assumes the second phase of the journey has begun, and we
  declare a new variable <code>Elseclock</code> which we make relative to the
  original built in clock, in such a way that while clock is going 1 to 2,
  Elseclock is going 0 to 1. So, even though there is only one <code>
  clock</code>, there can be as many additional variables as we care to declare
  (and have memory for), so even in fairly complex scenes, the single clock
  variable can be made the common coordinating factor which orchestrates all
  other motions.</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_118.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_120.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
