<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>The Sky Sphere</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_224"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_113.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_115.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>3.11.2&nbsp;&nbsp;The Sky Sphere</h3>

  <p>The <code><a href="povdoc_226.html#target_1221">sky_sphere</a></code> can be used to easily create a cloud covered
  sky, a nightly star sky or whatever sky you have in mind.</p><p>
   In the following examples we'll start with a very simple sky sphere that
  will get more and more complex as we add new features to it.</p>

</div>

<div class="divh4">
<a name="target_225"></a>
<h4>3.11.2.1&nbsp;&nbsp;Creating a Sky with a Color Gradient</h4>

  <p>Beside the single color sky sphere that is covered with the background
  feature the simplest sky sphere is a color gradient. You may have noticed
  that the color of the sky varies with the angle to the earth's surface
  normal. If you look straight up the sky normally has a much deeper blue than
  it has at the horizon.</p><p>
   We want to model this effect using the sky sphere as shown in the scene
  below (<code>skysph1.pov</code>).</p>
<pre>
  #include &quot;colors.inc&quot;
  camera {
    location &lt;0, 1, -4&gt;
    look_at &lt;0, 2, 0&gt;
    angle 80
  }
  light_source { &lt;10, 10, -10&gt; White }
  sphere {
    2*y, 1
    pigment { color rgb &lt;1, 1, 1&gt; }
    finish { ambient 0.2 diffuse 0 reflection 0.6 }
  }
  sky_sphere {
    pigment {
      gradient y
      color_map {
        [0 color Red]
        [1 color Blue]
      }
      scale 2
      translate -1
    }
  }
</pre>

  <p>The interesting part is the sky sphere statement. It contains a pigment
  that describes the look of the sky sphere. We want to create a color gradient
  along the viewing angle measured against the earth's surface normal.
  Since the ray direction vector is used to calculate the pigment colors we
  have to use the y-gradient.</p><p>
   The scale and translate transformation are used to map the points derived
  from the direction vector to the right range. Without those transformations
  the pattern would be repeated twice on the sky sphere. The <code><a href="povdoc_175.html#target_703">scale</a></code>
  statement is used to avoid the repetition and the <code><a href="povdoc_175.html#target_702">translate</a> -1</code>
  statement moves the color at index zero to the bottom of the sky sphere
  (that's the point of the sky sphere you'll see if you look straight
  down).</p><p>
   After this transformation the color entry at position 0 will be at the
  bottom of the sky sphere, i. e. below us, and the color at position 1 will be
  at the top, i. e. above us.</p><p>
   The colors for all other positions are interpolated between those two colors
  as you can see in the resulting image.</p>

  
<center><img src="images/skyspher.gif" alt="A simple gradient sky sphere"><br><font size=-1><cite>A simple gradient sky sphere</cite></font></center>


  <p>If you want to start one of the colors at a specific angle you'll
  first have to convert the angle to a color map index. This is done by using
  the formula <code>color_map_index = (1 - cos(angle)) / 2</code> where the
  angle is measured against the negated earth's surface normal. This is the
  surface normal pointing towards the center of the earth. An angle of 0
  degrees describes the point below us while an angle of 180 degrees represents
  the zenith.</p><p>
   In POV-Ray you first have to convert the degree value to <code><a href="povdoc_158.html#target_581">radians</a></code>
  as it is shown in the following example.</p>
<pre>
  sky_sphere {
    pigment {
      gradient y
      color_map {
        [(1-cos(radians( 30)))/2 color Red]
        [(1-cos(radians(120)))/2 color Blue]
      }
      scale 2
      translate -1
    }
  }
</pre>

  <p>This scene uses a color gradient that starts with a red color at 30
  degrees and blends into the blue color at 120 degrees. Below 30 degrees
  everything is red while above 120 degrees all is blue.</p>

</div>

<div class="divh4">
<a name="target_226"></a>
<h4>3.11.2.2&nbsp;&nbsp;Adding the Sun</h4>

  <p>In the following example we will create a sky with a red sun surrounded by
  a red color halo that blends into the dark blue night sky. We'll do this
  using only the sky sphere feature.</p><p>
   The sky sphere we use is shown below. A ground plane is also added for
  greater realism (<code>skysph2.pov</code>).</p>
<pre>
  sky_sphere {
    pigment {
      gradient y
      color_map {
        [0.000 0.002 color rgb &lt;1.0, 0.2, 0.0&gt;
                     color rgb &lt;1.0, 0.2, 0.0&gt;]
        [0.002 0.200 color rgb &lt;0.8, 0.1, 0.0&gt;
                     color rgb &lt;0.2, 0.2, 0.3&gt;]
      }
      scale 2
      translate -1
    }
    rotate -135*x
  }
  plane {
    y, 0
    pigment { color Green }
    finish { ambient .3 diffuse .7 }
  }
</pre>

  <p>The gradient pattern and the transformation inside the pigment are the
  same as in the example in the previous section.</p><p>
   The color map consists of three colors. A bright, slightly yellowish red
  that is used for the sun, a darker red for the halo and a dark blue for the
  night sky. The sun's color covers only a very small portion of the sky
  sphere because we don't want the sun to become too big. The color is used
  at the color map values 0.000 and 0.002 to get a sharp contrast at value
  0.002 (we don't want the sun to blend into the sky). The darker red color
  used for the halo blends into the dark blue sky color from value 0.002 to
  0.200. All values above 0.200 will reveal the dark blue sky.</p><p>
   The <code>rotate -135*x</code> statement is used to rotate the sun and the
  complete sky sphere to its final position. Without this rotation the sun
  would be at 0 degrees, i.e. right below us.</p>

  
<center><img src="images/redsun.gif" alt="A red sun descends into the night"><br><font size=-1><cite>A red sun descends into the night</cite></font></center>


  <p>Looking at the resulting image you'll see what impressive effects you
  can achieve with the sky sphere.</p>

</div>

<div class="divh4">
<a name="target_227"></a>
<h4>3.11.2.3&nbsp;&nbsp;Adding Some Clouds</h4>

  <p>To further improve our image we want to add some clouds by adding a second
  pigment. This new pigment uses the bozo pattern to create some nice clouds.
  Since it lays on top of the other pigment it needs some transparent colors in
  the color map (look at entries 0.5 to 1.0).</p>
<pre>
  sky_sphere {
    pigment {
      gradient y
      color_map {
        [0.000 0.002 color rgb &lt;1.0, 0.2, 0.0&gt;
                     color rgb &lt;1.0, 0.2, 0.0&gt;]
        [0.002 0.200 color rgb &lt;0.8, 0.1, 0.0&gt;
                     color rgb &lt;0.2, 0.2, 0.3&gt;]
      }
      scale 2
      translate -1
    }
    pigment {
      bozo
      turbulence 0.65
      octaves 6
      omega 0.7
      lambda 2
      color_map {
          [0.0 0.1 color rgb &lt;0.85, 0.85, 0.85&gt;
                   color rgb &lt;0.75, 0.75, 0.75&gt;]
          [0.1 0.5 color rgb &lt;0.75, 0.75, 0.75&gt;
                   color rgbt &lt;1, 1, 1, 1&gt;]
          [0.5 1.0 color rgbt &lt;1, 1, 1, 1&gt;
                   color rgbt &lt;1, 1, 1, 1&gt;]
      }
      scale &lt;0.2, 0.5, 0.2&gt;
    }
    rotate -135*x
  }
</pre>

  
<center><img src="images/cloudsky.gif" alt="A cloudy sky with a setting sun"><br><font size=-1><cite>A cloudy sky with a setting sun</cite></font></center>


  <p>The sky sphere has one drawback as you might notice when looking at the
  final image (<code>skysph3.pov</code>). The sun doesn't emit any light
  and the clouds will not cast any shadows. If you want to have clouds that
  cast shadows you'll have to use a real, large sphere with an appropriate
  texture and a light source somewhere outside the sphere.</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_113.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_115.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
