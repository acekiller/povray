<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>The Rainbow</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_238"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_115.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_117.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>3.11.4&nbsp;&nbsp;The Rainbow</h3>

  <p>The <code><a href="povdoc_227.html#target_1222">rainbow</a></code> feature can be used
  to create rainbows and maybe other more strange effects. The rainbow is a fog
  like effect that is restricted to a cone-like volume.</p>

</div>

<div class="divh4">
<a name="target_239"></a>
<h4>3.11.4.1&nbsp;&nbsp;Starting With a Simple Rainbow</h4>

  <p>The rainbow is specified with a lot of parameters: the angle under which
  it is visible, the width of the color band, the direction of the incoming
  light, the fog-like distance based particle density and last but not least
  the color map to be used.</p><p>
   The size and shape of the rainbow are determined by the <code><a href="povdoc_181.html#target_721">angle</a></code>
  and <code><a href="povdoc_149.html#target_333">width</a></code> keywords. The <code><a href="povdoc_181.html#target_724">direction</a></code>
  keyword is used to set the direction of the incoming light, thus setting the
  rainbow's position. The rainbow is visible when the angle between the direction
  vector and the incident light direction is larger than angle-width/2 and smaller
  than angle+width/2.</p><p>
   The incoming light is the virtual light source that is responsible for the
  rainbow. There needn't be a real light source to create the rainbow
  effect.</p><p>
   The rainbow is a fog-like effect, i.e. the rainbow's color is mixed with
  the background color based on the distance to the intersection point. If you
  choose small distance values the rainbow will be visible on objects, not just
  in the background. You can avoid this by using a very large distance
  value.</p><p>
   The color map is the crucial part of the rainbow since it contains all the
  colors that normally can be seen in a rainbow. The color of the innermost
  color band is taken from the color map entry 0 while the outermost band is
  take from entry 1. You should note that due to the limited color range any
  monitor can display it is impossible to create a real rainbow. There are just
  some colors that you cannot display.</p><p>
   The filter channel of the rainbow's color map is used in the same way as
  with fogs. It determines how much of the light passing through the rainbow is
  filtered by the color.</p><p>
   The following example shows a simple scene with a ground plane, three
  spheres and a somewhat exaggerated rainbow (<code>rainbow1.pov</code>).</p>
<pre>
  #include &quot;colors.inc&quot;
  camera {
    location &lt;0, 20, -100&gt;
    look_at &lt;0, 25, 0&gt;
    angle 80
  }
  background { color SkyBlue }
  plane { y, -10 pigment { color Green } }
  light_source { &lt;100, 120, 40&gt; color White }
  // declare rainbow's colors
  #declare r_violet1 = color rgbf&lt;1.0, 0.5, 1.0, 1.0&gt;;
  #declare r_violet2 = color rgbf&lt;1.0, 0.5, 1.0, 0.8&gt;;
  #declare r_indigo  = color rgbf&lt;0.5, 0.5, 1.0, 0.8&gt;;
  #declare r_blue    = color rgbf&lt;0.2, 0.2, 1.0, 0.8&gt;;
  #declare r_cyan    = color rgbf&lt;0.2, 1.0, 1.0, 0.8&gt;;
  #declare r_green   = color rgbf&lt;0.2, 1.0, 0.2, 0.8&gt;;
  #declare r_yellow  = color rgbf&lt;1.0, 1.0, 0.2, 0.8&gt;;
  #declare r_orange  = color rgbf&lt;1.0, 0.5, 0.2, 0.8&gt;;
  #declare r_red1    = color rgbf&lt;1.0, 0.2, 0.2, 0.8&gt;;
  #declare r_red2    = color rgbf&lt;1.0, 0.2, 0.2, 1.0&gt;;
  // create the rainbow
  rainbow {
    angle 42.5
    width 5
    distance 1.0e7
    direction &lt;-0.2, -0.2, 1&gt;
    jitter 0.01
    color_map {
      [0.000  color r_violet1]
      [0.100  color r_violet2]
      [0.214  color r_indigo]
      [0.328  color r_blue]
      [0.442  color r_cyan]
      [0.556  color r_green]
      [0.670  color r_yellow]
      [0.784  color r_orange]
      [0.900  color r_red1]
    }
  }
</pre>

  <p>Some irregularity is added to the color bands using the <code><a href="povdoc_193.html#target_938">jitter</a></code> keyword.</p>

  
<center><img src="images/crainbow.gif" alt="A colorful rainbow"><br><font size=-1><cite>A colorful rainbow</cite></font></center>


  <p>The rainbow in our sample is much too bright. You'll never see a
  rainbow like this in reality. You can decrease the rainbow's colors by
  decreasing the RGB values in the color map.</p>

</div>

<div class="divh4">
<a name="target_240"></a>
<h4>3.11.4.2&nbsp;&nbsp;Increasing the Rainbow's Translucency</h4>

  <p>The result we have so far looks much too bright. Just reducing the
  rainbow's color helps but it's much better to increase the
  translucency of the rainbow because it is more realistic if the background is
  visible through the rainbow.</p><p>
   We can use the transmittance channel of the colors in the color map to
  specify a minimum translucency, just like we did with the fog. To get
  realistic results we have to use very large transmittance values as you can
  see in the following example (<code>rainbow2.pov</code>).</p>
<pre>
  rainbow {
    angle 42.5
    width 5
    distance 1.0e7
    direction &lt;-0.2, -0.2, 1&gt;
    jitter 0.01
    color_map {
      [0.000  color r_violet1 transmit 0.98]
      [0.100  color r_violet2 transmit 0.96]
      [0.214  color r_indigo  transmit 0.94]
      [0.328  color r_blue    transmit 0.92]
      [0.442  color r_cyan    transmit 0.90]
      [0.556  color r_green   transmit 0.92]
      [0.670  color r_yellow  transmit 0.94]
      [0.784  color r_orange  transmit 0.96]
      [0.900  color r_red1    transmit 0.98]
    }
  }
</pre>

  <p>The transmittance values increase at the outer bands of the rainbow to
  make it softly blend into the background.</p>

  
<center><img src="images/rrainbow.gif" alt="A much more realistic rainbow"><br><font size=-1><cite>A much more realistic rainbow</cite></font></center>


  <p>The resulting image looks much more realistic than our first rainbow.</p>

</div>

<div class="divh4">
<a name="target_241"></a>
<h4>3.11.4.3&nbsp;&nbsp;Using a Rainbow Arc</h4>

  <p>Currently our rainbow has a circular shape, even though most of it is
  hidden below the ground plane. You can easily create a rainbow arc by using
  the <code><a href="povdoc_227.html#target_1230">arc_angle</a></code> keyword with an angle below 360 degrees.</p><p>
   If you use <code>arc_angle 120</code> for example you'll get a rainbow
  arc that abruptly vanishes at the arc's ends. This does not look good. To
  avoid this the <code><a href="povdoc_227.html#target_1231">falloff_angle</a></code> keyword can be used to specify a
  region where the arc smoothly blends into the background.</p><p>
   As explained in the rainbow's reference section (see
  &quot;<a href="povdoc_227.html#target_1222">Rainbow</a>&quot;) the arc extends from -arc_angle/2 to arc_angle/2 while
  the blending takes place from -arc_angle/2 to -falloff_angle/2 and
  falloff_angle/2 to arc_angle/2. This is the reason why the <code>falloff_angle</code>
  has to be smaller or equal to the <code>arc_angle</code>.</p><p>
   In the following examples we use an 120 degrees arc with a 45 degree falloff
  region on both sides of the arc (<code>rainbow3.pov</code>).</p>
<pre>
  rainbow {
    angle 42.5
    width 5
    arc_angle 120
    falloff_angle 30
    distance 1.0e7
    direction &lt;-0.2, -0.2, 1&gt;
    jitter 0.01
    color_map {
      [0.000  color r_violet1 transmit 0.98]
      [0.100  color r_violet2 transmit 0.96]
      [0.214  color r_indigo  transmit 0.94]
      [0.328  color r_blue    transmit 0.92]
      [0.442  color r_cyan    transmit 0.90]
      [0.556  color r_green   transmit 0.92]
      [0.670  color r_yellow  transmit 0.94]
      [0.784  color r_orange  transmit 0.96]
      [0.900  color r_red1    transmit 0.98]
    }
  }
</pre>

  <p>The arc angles are measured against the rainbows up direction which can be
  specified using the <code>up</code> keyword. By default the up direction is
  the y-axis.</p>

  
<center><img src="images/arainbow.gif" alt="A rainbow arc"><br><font size=-1><cite>A rainbow arc</cite></font></center>


  <p>We finally have a realistic looking rainbow arc.</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_115.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_117.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
