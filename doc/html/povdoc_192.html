<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Constructive Solid Geometry</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_905"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_191.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_193.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>6.5.6&nbsp;&nbsp;Constructive Solid Geometry</h3>

<a name="target_906"></a>

  <p>In addition to all of the primitive shapes POV-Ray supports, you can also
  combine multiple simple shapes into complex shapes using <em> Constructive
  Solid Geometry</em> (CSG). There are four basic types of CSG operations:
  union, intersection, difference, and merge. CSG objects can be composed of
  primitives or other CSG objects to create more, and more complex shapes.</p>

</div>

<div class="divh4">
<a name="target_907"></a>
<h4>6.5.6.1&nbsp;&nbsp;Inside and Outside</h4>

  <p>Most shape primitives, like spheres, boxes and blobs divide the world into
  two regions. One region is inside the object and one is outside. Given any
  point in space you can say it's either inside or outside any particular
  primitive object. Well, it could be exactly on the surface but this case is
  rather hard to determine due to numerical problems.</p><p>
   Even planes have an inside and an outside. By definition, the surface normal
  of the plane points towards the outside of the plane. You should note that
  triangles and triangle-based shapes cannot be used as solid objects in CSG
  since they have no well defined inside and outside.</p>
  <p class="Note"><strong>Note:</strong>: Although triangles, bicubic_patches and some other shapes have
no well defined inside and outside, they have a front- and backside
which makes it possible to use a texture on the front side and an
interior_texture on the back side.<p></p>
   CSG uses the concepts of inside and outside to combine shapes together as
  explained in the following sections.</p><p>
  Imagine you have two objects that partially overlap like shown in the figure
  below. Four different areas of points can be distinguished: points that are
  neither in object <code>A</code> nor in object <code>B</code>, points that
  are in object <code>A</code> but not in object <code>B</code>, points that
  are not in object <code>A</code> but in object <code>B</code> and last not
  least points that are in object <code> A</code> and object <code>B</code>.
  </p>

  
<center><img src="images/objoverl.gif" alt="Two overlapping objects"><br><font size=-1><cite>Two overlapping objects</cite></font></center>


  <p>Keeping this in mind it will be quite easy to understand how the CSG
  operations work.</p><p>
  When using CSG it is often useful to invert an object so that it'll be
  inside-out. The appearance of the object is not changed, just the way that
  POV-Ray perceives it. When the <code>inverse</code> keyword is used the <em>
  inside</em> of the shape is flipped to become the <em> outside</em> and vice
  versa.</p><p>
  The inside/outside distinction is not important for a <code>union</code>, but
  is important for <code> intersection</code>, <code>difference</code>, and
  <code> merge</code>.Therefore any objects may be combined using <code>
  union</code> but only solid objects, i.e. objects that have a well-defined
  interior can be used in the other kinds of CSG. The objects described in
  &quot;Finite Patch Primitives&quot; have no well defined inside/outside. All
  objects described in the sections &quot;Finite Solid Primitives&quot; and
  &quot;Infinite Solid Primitives&quot;.</p>

</div>

<div class="divh4">
<a name="target_908"></a>
<h4>6.5.6.2&nbsp;&nbsp;Union</h4>

  
<center><img src="images/unionobj.gif" alt="The union of two objects"><br><font size=-1><cite>The union of two objects</cite></font></center>


  <p>The simplest kind of CSG is the <code>union</code>. The syntax is:</p>
<pre>
UNION:
    union
    {
        OBJECTS...
        [OBJECT_MODIFIERS...]
    }
</pre>

  <p>Unions are simply glue used to bind two or more shapes into a single
  entity that can be manipulated as a single object. The image above shows the
  union of <code>A</code> and <code>B</code>. The new object created by the
  union operation can be scaled, translated and rotated as a single shape. The
  entire union can share a single texture but each object contained in the
  union may also have its own texture, which will override any texture
  statements in the parent object.</p><p>
  You should be aware that the surfaces inside the union will not be removed.
  As you can see from the figure this may be a problem for transparent unions.
  If you want those surfaces to be removed you'll have to use the <code>
  merge</code> operations explained in a later section.</p><p>
  The following union will contain a box and a sphere.</p>
<pre>
  union {
    box { &lt;-1.5, -1, -1&gt;, &lt;0.5, 1, 1&gt; }
    cylinder { &lt;0.5, 0, -1&gt;, &lt;0.5, 0, 1&gt;, 1 }
  }
</pre>

<a name="target_909"></a>

  <p>Earlier versions of POV-Ray placed restrictions on unions so you often had
  to combine objects with <code>composite</code> statements. Those earlier
  restrictions have been lifted so <code>composite</code> is no longer needed.
  It is still supported for backwards compatibility.</p>

</div>

<div class="divh5">
<a name="target_910"></a>
<h5>6.5.6.2.1&nbsp;&nbsp;Split_Union</h5>
  <p><code>split_union</code> is a boolean keyword that can be added to a union.
  It has two states <code>on</code>/<code>off</code>, its default is <code>on</code>.</p>

  <p><code>split_union</code> is used when <a href="povdoc_230.html#target_1249">photons</a> are shot 
  at the CSG-object. The object is split up in its compound parts, photons are shot at 
  each part separately. This is to prevent photons from being shot at 'empty spaces' in the object,
  for example the holes in a grid. With compact objects, without 'empty spaces'
  <code>split_union off</code> can improve photon 
  gathering.</p>
<pre>
  union {
    object {...}
    object {...}
    split_union off
  }
</pre>


</div>

<div class="divh4">
<a name="target_911"></a>
<h4>6.5.6.3&nbsp;&nbsp;Intersection</h4>

  <p>The <code>intersection</code> object creates a shape containing only those
  areas where all components overlap. A point is part of an intersection if it is
  inside both objects, <code>A</code> and <code>B</code>, as show in the figure
  below.</p>

   
<center><img src="images/isectobj.gif" alt="The intersection of two objects"><br><font size=-1><cite>The intersection of two objects</cite></font></center>


  <p>The syntax is:</p>
<pre>
INTERSECTION:
    intersection
    {
        SOLID_OBJECTS...
        [OBJECT_MODIFIERS...]
    }
</pre>

  <p>The component objects must have well defined inside/outside properties.
  Patch objects are not allowed.</p>
  <p class="Note"><strong>Note:</strong> if all components do not overlap,
  the intersection object disappears.</p><p>
  Here is an example that overlaps:</p>
<pre>
  intersection {
    box { &lt;-1.5, -1, -1&gt;, &lt;0.5, 1, 1&gt; }
    cylinder { &lt;0.5, 0, -1&gt;, &lt;0.5, 0, 1&gt;, 1 }
  }
</pre>

</div>

<div class="divh4">
<a name="target_912"></a>
<h4>6.5.6.4&nbsp;&nbsp;Difference</h4>

  <p>The CSG <code>difference</code> operation takes the intersection between
  the first object and the inverse of all subsequent objects. Thus only points
  inside object <code>A</code> and outside object <code>B</code> belong to the
  difference of both objects.</p><p>
  The result is a subtraction of the 2nd shape from the first shape as shown
  in the figure below.</p>

   
<center><img src="images/diffobj.gif" alt="The difference between two objects"><br><font size=-1><cite>The difference between two objects</cite></font></center>


  <p>The syntax is:</p>
<pre>
DIFFERENCE:
    difference
    {
        SOLID_OBJECTS...
        [OBJECT_MODIFIERS...]
    }
</pre>

  <p>The component objects must have well defined inside/outside properties.
  Patch objects are not allowed. </p>
  <p class="Note"><strong>Note:</strong> if the first object is entirely
  inside the subtracted objects, the difference object disappears.</p><p>
  Here is an example of a properly formed difference:</p>
<pre>
  difference {
    box { &lt;-1.5, -1, -1&gt;, &lt;0.5, 1, 1&gt; }
    cylinder { &lt;0.5, 0, -1&gt;, &lt;0.5, 0, 1&gt;, 1 }
  }
</pre>

  <p class="Note"><strong>Note:</strong> internally, POV-Ray simply adds the <code>inverse</code> keyword
  to the second (and subsequent) objects and then performs an intersection.</p><p> The
  example above is equivalent to:</p>
<pre>
  intersection {
    box { &lt;-1.5, -1, -1&gt;, &lt;0.5, 1, 1&gt; }
    cylinder { &lt;0.5, 0, -1&gt;, &lt;0.5, 0, 1&gt;, 1 inverse }
  }
</pre>

</div>

<div class="divh4">
<a name="target_913"></a>
<h4>6.5.6.5&nbsp;&nbsp;Merge</h4>

  <p>The <code>union</code> operation just glues objects together, it does not
  remove the objects' surfaces inside the <code>union</code>. Under most
  circumstances this doesn't matter. However if a transparent <code>
  union</code> is used, those interior surfaces will be visible. The <code>
  merge</code> operations can be used to avoid this problem. It works just like
  <code>union</code> but it eliminates the inner surfaces like shown in the
  figure below.</p>

   
<center><img src="images/mergeobj.gif" alt="Merge removes inner surfaces"><br><font size=-1><cite>Merge removes inner surfaces</cite></font></center>


  <p>The syntax is:</p>
<pre>
MERGE:
    merge
    {
        SOLID_OBJECTS...
        [OBJECT_MODIFIERS...]
    }
</pre>

  <p>The component objects must have well defined inside/outside properties.
  Patch objects are not allowed. </p>
  <p class="Note"><strong>Note:</strong> that in general <code>merge</code> is
  slower rendering than <code>union</code> when used with non transparent
  objects. A small test may be needed to determine what is the optimal solution
  regarding speed and visual result.
</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_191.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_193.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
