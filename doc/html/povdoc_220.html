<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Sampling Parameters &amp; Methods</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_1194"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_219.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_221.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>6.8.2&nbsp;&nbsp;Sampling Parameters &amp; Methods</h3>

<a name="target_1195"></a>

  <p>Media effects are calculated by sampling the media along the path of the
  ray. It uses a method called <em>Monte Carlo integration.</em> The <code>intervals</code>
  keyword may be used to specify the integer number of intervals used to 
  sample the ray. The default number of intervals is 10. For object media the 
  intervals are spread between the entry and exit points as the ray passes 
  through the container object. For atmospheric media, the intervals spans the
  entire length of the ray from its start until it hits an object. For media 
  types which interact with spotlights or cylinder lights, the intervals 
  which are not illuminated by these light types are weighted differently 
  than the illuminated intervals when distributing samples.</p>

<a name="target_1196"></a>

  <p>The <code>ratio</code> keyword distributes intervals differently between lit 
  and unlit areas. The default value of <code>ratio 0.9</code> means that lit 
  intervals get more samples than unlit intervals. Note that the total number 
  of intervals must exceed the number of illuminated intervals. If a ray 
  passes in and out of 8 spotlights but you've only specified 5 intervals 
  then an error occurs.</p>

<a name="target_1197"></a>

  <p>The <code>samples</code> <em><code>Min</code></em>, 
  <em><code> Max</code></em> keyword specifies the minimum and maximum number 
  of samples taken per interval. The default values are <code>samples 
  1,1</code>. </p>

<a name="target_1198"></a>
<a name="target_1199"></a>
  <p>As each interval is sampled, the variance is computed. If the 
  variance is below a threshold value, then no more samples are needed. The 
  <code>variance</code> and <code>confidence</code> keywords specify the 
  permitted variance allowed and the confidence that you are within that 
  variance. The exact calculations are quite complex and involve chi-squared 
  tests and other statistical principles too messy to describe here. The 
  default values are <code>variance 1.0/128</code> and <code>confidence 
  0.9</code>. For slower more accurate results, decrease the variance and 
  increase the confidence.</p>
  <p class="Note"><strong>Note:</strong> the maximum number of samples 
  limits the calculations even if the proper variance and confidence are 
  never reached.</p>

<a name="target_1200"></a>

  <p>The <code>method</code> keyword lets you specify what sampling method is used, 
  POV-Ray provides three. <code>Method 1</code> is the method described above.</p>

  <p>Sample <code>method 2</code> distributes samples evenly along the viewing ray or light ray. 
  The latter can make things look smoother sometimes. If you specify a max samples higher than 
  the minimum samples, POV will take additional samples, but they will be random, just like in 
  method 1. Therefore, it is suggested you set the max samples equal to the minimum samples. 
  <code>jitter</code> will cause method 2 to look similar to method 1. It should be followed by 
  a float, and a value of 1 will stagger the samples in the full range between samples.</p>

<a name="target_1201"></a>

   <p>Sample <code>method 3</code> uses adaptive sampling (similar to adaptive anti-aliasing) 
   which is very much like the sampling method used in POV-Ray 3.0's atmosphere. This code was 
   written from the ground-up to work with media, however. Adaptive sampling works by taking 
   another sample between two existing samples if there is too much variance in the original 
   two samples. This leads to fewer samples being taken in areas where the effect from the media 
   remains constant. The adaptive sampling is only performed if the minimum
   samples are set to 3 or more. <p></p>

   You can specify the anti-aliasing recursion depth using the <code>aa_level</code> 
   keyword followed by an integer. You can specify the anti-aliasing threshold by using the 
   <code>aa_threshold</code> followed by a float. The default for <code>aa_level</code> is 4 
   and the default <code>aa_threshold</code> is 0.1. <code>jitter</code> also works with method 3.
   Sample method 3 ignores the maximum samples value. It's usually best to only use one interval
   with method 3. Too many intervals can lead to artefacts, and POV will create more intervals 
   if it needs them.</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_219.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_221.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
