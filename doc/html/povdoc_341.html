<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>How can I avoid artifacts and still get good JPEG compression?</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_1663"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_340.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_342.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>9.2.5&nbsp;&nbsp;How can I avoid artifacts and still get good JPEG compression?</h3>

<p>
(Answer by Peter J. Holzer)

</p><p>
    First, you have to know a little bit about how a picture is stored
    in JPEG format.

</p><p>
    Unlike most image formats it doesn't store RGB values, but YUV
    values (1 grayscale value and two &quot;color difference&quot; values) just
    like they are used in a color TV signal. Since the human eye uses
    mostly the gray values to detect edges, one can usually get away
    with storing the color information at a lower resolution - an
    800x600 JPEG typically has only grayscale information at 800x600,
    but color information at 400x300. This is called supersampling.

</p><p>
    For each color channel separately, the picture is then divided into
    little squares and the cosine transform of each square is computed.
    A neat feature of this transformation is that if you throw away only
    a few of the values, the quality will degrade very little, but the
    image will compress a lot better. The percentage of values stored is
    called the quality.

</p><p>
    Finally, the data is compressed.

</p><p>
    Most programs only let you change the quality setting. This is fine
    for photos and photorealistic renderings of &quot;natural&quot; scenes.
    Generally, quality values around 75% give be best compromise between
    quality and image size.

</p><p>
    However, for images which contain very saturated colors, the lower
    resolution of the color channels causes visible artifacts which are
    very similar to those caused by low quality settings. They can be
    minimized by setting an extremely high quality (close to 100%), but
    this will dramatically increase the file size, and often the
    artifacts are still visible.

</p><p>
    A better method is to turn off supersampling. The higher resolution
    will cause only a modest increase in file size, which is more than
    offset by the ability to use a lower quality setting.

</p><p>
    The cjpeg command line utility (which should be available for all
    systems which have a command line, e.g., Linux, MS-DOS, Unix, ...)
    has an &quot;-sample&quot; to set the sampling factors for all passes.

<pre>
        cjpeg -sample 1x1,1x1,1x1 -quality 75 -optimize
</pre>

</p><p>
    should be good default values which have to be changed only rarely.
</p>

<!-- ================================================================== -->

<a name="povtootherformatsdifficulty" class="ExternalLink">
</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_340.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_342.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
