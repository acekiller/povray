<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>What is the problem?</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_1706"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_383.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_385.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>9.9.1&nbsp;&nbsp;What is the problem?</h3>

<p>There is a peculiar problem with smooth triangles which shows as a lighting
artifact in certain cases. This can happen in individual smooth triangles,
meshes with smooth triangles and smooth heightfields. The problem also
manifests itself when using the slope pattern in the same situation.
This image shows the two cases:
</p>

  
<center><img src="images/vfaq/startifacts.gif" alt="Lighting and slope pattern artifacts in a smooth triangle"><br><font size=-1><cite>Lighting and slope pattern artifacts in a smooth triangle</cite></font></center>


<p>The source code of this image is the following:</p>

<pre>
camera { right x*4 location &lt;0,1,-5&gt; look_at 0 angle 35 }
light_source { y*100, 1 }
light_source { -y*100, x }

smooth_triangle
{ &lt;-.5,0,-1&gt;,&lt;-1,1,-1&gt;, &lt;.5,0,-1&gt;,&lt;1,1,-1&gt;, &lt;0,0,1&gt;,&lt;0,1,1&gt;
  pigment { rgb 1 }
  translate -x*.6
}
smooth_triangle
{ &lt;-.5,0,-1&gt;,&lt;-1,1,-1&gt;, &lt;.5,0,-1&gt;,&lt;1,1,-1&gt;, &lt;0,0,1&gt;,&lt;0,1,1&gt;
  pigment { slope y color_map { [0 rgb z][1 rgb x+y] } }
  finish { ambient 1 }
  translate x*.6
}
</pre>

<p>The triangle at the left is a regular smooth triangle which is illuminated
by a white light source from above. There's also a red light source
illuminating the triangle from below. As you can see, the farther part of the
triangle is wrongly illuminated as red. No part of the triangle should be
illuminated by the red light source because the upper side of the triangle
is nowhere facing down.</p>

<p>The triangle at the right is the same smooth triangle with a slope
pattern applied to it, which goes from blue (in the negative y direction)
to yellow (in the positive y direction). Lighting has been eliminated by
specifying a high ambient. As all the parts of the upper side
of the triangle are pointing upwards, the whole triangle should be colored
with shades of yellow, but as you can see, the same farther part is
wrongly colored blue.</p>

<p>(If you guessed that the problem happens when the normal vector of the
triangle is pointing away from the camera, then you guessed right.)</p>



</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_383.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_385.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
