<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>File I/O Directives</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_667"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_167.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_169.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>6.2.3&nbsp;&nbsp;File I/O Directives</h3>

  <p>You may open, read, write, append, and close plain ASCII text files 
  while parsing POV-Ray scenes. This feature is primarily intended to help 
  pass information between frames of an animation. Values such as an 
  object's position can be written while parsing the current frame and 
  read back during the next frame. Clever use of this feature could allow a 
  POV-Ray scene to generate its own include files or write self-modifying 
  scripts. We trust that users will come up with other interesting uses for 
  this feature.</p>
  <p class="Note"><strong>Note:</strong> some platform versions of POV-Ray (e.g. Windows)
  provide means to restrict the ability of scene files to read &amp; write files.</p>

</div>

<div class="divh4">
<a name="target_668"></a>
<h4>6.2.3.1&nbsp;&nbsp;The #fopen Directive</h4>
<a name="target_669"></a>


  <p>Users may open a text file using the <code>#fopen</code> directive. The
  syntax is as follows:</p>
<pre>
FOPEN_DIRECTIVE:
    #fopen IDENTIFIER &quot;filename&quot; OPEN_TYPE
OPEN_TYPE:
    read | write | append
</pre>

  <p>Where <em>IDENTIFIER</em> is an undefined identifier used to reference
  this file as a file handle, <em>&quot;filename&quot;</em> is any string
  literal or string expression which specifies the file name. Files opened with
  the <code>read</code> are open for read only. Those opened with <code>
  write</code> create a new file with the specified name and it overwrites any
  existing file with that name. Those opened with <code>append</code> opens a
  file for writing but appends the text to the end of any existing file.</p><p>
   The file handle identifier created by <code>#fopen</code> is always global
  and remains in effect (and the file remains open) until the scene parsing is
  complete or until you <code>#fclose</code> the file. You may use <code>
  #ifdef</code> <em>FILE_HANDLE_IDENTIFIER</em> to see if a file is open.</p>

</div>

<div class="divh4">
<a name="target_670"></a>
<h4>6.2.3.2&nbsp;&nbsp;The #fclose Directive</h4>
<a name="target_671"></a>


  <p>Files opened with the <code>#fopen</code> directive are automatically
  closed when scene parsing completes however you may close a file using the
  <code>#fclose</code> directive. The syntax is as follows:</p>
<pre>
FCLOSE_DIRECTIVE:
    #fclose FILE_HANDLE_IDENTIFIER
</pre>

  <p>Where <em>FILE_HANDLE_IDENTIFIER</em> is previously opened file opened
  with the <code>#fopen</code> directive. See
  &quot;<a href="#target_668">The #fopen Directive</a>&quot;.</p>

</div>

<div class="divh4">
<a name="target_672"></a>
<h4>6.2.3.3&nbsp;&nbsp;The #read Directive</h4>
<a name="target_673"></a>


  <p>You may read string, float or vector values from a plain ASCII text file
  directly into POV-Ray variables using the #read directive. The file must
  first be opened in &quot;read&quot; mode using the #fopen directive. The
  syntax for #read is as follows:</p>
<pre>
READ_DIRECTIVE:
  #read FILE_HANDLE_IDENTIFIER, DATA_IDENTIFIER[,DATA_IDENTIFIER]..)
DATA_IDENTIFIER:
  UNDECLARED_IDENTIFIER | FLOAT_IDENTIFIER | VECTOR_IDENTIFIER | 
  STRING_IDENTIFIER
</pre>

  <p>Where <em>FILE_HANDLE_IDENTIFIER</em> is the previously opened file. It is
  followed by one or more <em>DATA_IDENTIFIER</em>s separated by commas. The
  parentheses around the identifier list are required. A <em>
  DATA_IDENTIFIER</em> is any undeclared identifier or any previously declared
  string identifier, float identifier, or vector identifier. Undefined
  identifiers will be turned into global identifiers of the type determined by
  the data which is read. Previously defined identifiers remain at whatever
  global/local status they had when originally created. Type checking is
  performed to insure that the proper type data is read into these
  identifiers.</p><p>
  The format of the data to be read must be a series of valid string literals,
  float literals, or vector literals separated by commas. Expressions or
  identifiers are not permitted in the data file however unary minus signs and
  exponential notation are permitted on float values.</p><p>
   If you attempt to read past end-of-file, the file is automatically closed
  and the <em> FILE_HANDLE_IDENTIFIER</em> is deleted from the symbol table.
  This means that the boolean function <code>
  defined(</code><em>IDENTIFIER</em><code>)</code> can be used to detect
  end-of-file. For example:</p>
<pre>
  #fopen MyFile &quot;mydata.txt&quot; read
  #while (defined(MyFile))
    #read (MyFile,Var1,Var2,Var3)
    ...
  #end
</pre>

</div>

<div class="divh4">
<a name="target_674"></a>
<h4>6.2.3.4&nbsp;&nbsp;The #write Directive</h4>
<a name="target_675"></a>


  <p>You may write string, float or vector values to a plain ASCII text file
  from POV-Ray variables using the <code>#write</code> directive. The file must
  first be opened in either <code>write</code> or <code>append</code> mode
  using the <code>#fopen</code> directive. The syntax for <code> #write</code>
  is as follows:</p>
<pre>
WRITE_DIRECTIVE:
    #write( FILE_HANDLE_IDENTIFIER, DATA_ITEM[,DATA_ITEM]...)
DATA_ITEM:
    FLOAT | VECTOR | STRING
</pre>

  <p>Where <em>FILE_HANDLE_IDENTIFIER</em> is the previously opened file. It is
  followed by one or more <em>DATA_ITEM</em>s separated by commas. The
  parentheses around the identifier list are required. A <em>DATA_ITEM</em> is
  any valid string expression, float expression, or vector expression. Float
  expressions are evaluated and written as signed float literals. If you
  require format control, you should use the <code>str(VALUE,L,P)</code>
  function to convert it to a formatted string. See &quot;<a href="povdoc_162.html#target_640">String Functions</a>&quot;
  for details on the <code>str</code> function. Vector expressions are 
  evaluated into three signed float constants and are written with angle 
  brackets and commas in standard POV-Ray vector notation. String expressions 
  are evaluated and written as specified.</p>
  <p class="Note"><strong>Note:</strong> data read by the <code>#read</code> directive must have comma
  delimiters between values and quotes around string data but the <code>
  #write</code> directive does not automatically output commas or quotes.</p><p>
  For example the following <code> #read</code> directive reads a string, float and
  vector.</p>
<pre>
 #read (MyFile,MyString,MyFloat,MyVect)
</pre>

  <p>It expects to read something like:</p>
<pre>
 &quot;A quote delimeted string&quot;, -123.45, &lt;1,2,-3&gt;
</pre>

  <p>The POV-Ray code to write this might be:</p>
<pre>
 #declare Val1 = -123.45;
 #declare Vect1 = &lt;1,2,-3&gt;;
 #write(MyFile,&quot;\&quot;A quote delimited string\&quot;,&quot;,Val1,&quot;,&quot;,Vect1,&quot;\n&quot;)
</pre>

  <p>See &quot;<a href="povdoc_162.html#target_638">String Literals</a>&quot; and
  &quot;<a href="povdoc_162.html#target_638">Text Formatting</a>&quot; for details
  on writing special characters such as quotes, newline, etc.</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_167.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_169.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
