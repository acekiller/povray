<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Assumed_Gamma</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_1271"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_236.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_238.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>6.11.3&nbsp;&nbsp;Assumed_Gamma</h3>

  <p>Many people may have noticed at one time or another that some images are
  too bright or dim when displayed on their system. As a rule, Macintosh users
  find that images created on a PC are too bright, while PC users find that
  images created on a Macintosh are too dim.</p><p>
   The <code>assumed_gamma</code> global setting works in conjunction with the
  <code><a href="povdoc_149.html#target_363">Display_Gamma</a></code> INI setting (see
  section &quot;<a href="povdoc_149.html#target_357">Display Hardware Settings</a>&quot;)
  to ensure that scene files render the same way across the wide variety of
  hardware platforms that POV-Ray is used on. The assumed gamma setting is used
  in a scene file by adding</p>
<pre>
 global_settings { assumed_gamma Value }
</pre>

  <p>where the assumed gamma value is the correction factor to be applied
  before the pixels are displayed and/or saved to disk. For scenes created in
  older versions of POV-Ray, the assumed gamma value will be the same as the
  display gamma value of the system the scene was created on. For PC systems,
  the most common display gamma is 2.2, while for scenes created on Macintosh
  systems should use a scene gamma of 1.8. Another gamma value that sometimes
  occurs in scenes is 1.0.</p><p>
   Scenes that do not have an <code>assumed_gamma</code> global setting will
  not have any gamma correction performed on them, for compatibility reasons.
  If you are creating new scenes or rendering old scenes, it is strongly
  recommended that you put in an appropriate <code>assumed_gamma</code> global
  setting. For new scenes, you should use an assumed gamma value of 1.0 as this
  models how light appears in the real world more realistically.</p>

 <p>
  Before we go to the following sections, that explain more thoroughly what gamma is and why it is
  important, a short overview of how gamma works in POV-Ray:

<dl>
<dt>
no <code>assumed_gamma</code> in scene :</dt>
<dd>
  No gamma correction is applied to output file.</dd>

<dt>
<code>assumed_gamma 1</code> :</dt>
<dd>
  Gamma <code>Display_Gamma</code> is applied to output file.</dd>
<dd>
  If <code>Display_Gamma</code> is not specified, 2.2 is used.</dd>

<dt>
<code>assumed_gamma G</code> :</dt>
<dd>
  Gamma <code>Display_Gamma/G</code> is applied to output file.</dd>
<dd>
  If <code>Display_Gamma</code> is not specified, 2.2/G is used.</dd>

<dt>
Recommended value for <code>assumed_gamma</code> is 1.</dt>
</dl>

</p>

</div>

<div class="divh4">
<a name="target_1272"></a>
<h4>6.11.3.1&nbsp;&nbsp;Monitor Gamma</h4>

  <p>The differences in how images are displayed is a result of how a computer
  actually takes an image and displays it on the monitor. In the process of
  rendering an image and displaying it on the screen, several gamma values are
  important, including the POV scene file or image file gamma and the monitor
  gamma.</p><p>
   Most image files generated by POV-Ray store numbers in the range from 0 to
  255 for each of the red, green and blue components of a pixel. These numbers
  represent the intensity of each color component, with 0 being black and 255
  being the brightest color (either 100% red, 100% green or 100% blue). When an
  image is displayed, the graphics card converts each color component into a
  voltage which is sent to the monitor to light up the red, green and blue
  phosphors on the screen. The voltage is usually proportional to the value of
  each color component.</p><p>
   Gamma becomes important when displaying intensities that aren't the
  maximum or minimum possible values. For example, 127 should represent 50% of
  the maximum intensity for pixels stored as numbers between 0 and 255. On
  systems that don't do gamma correction, 127 will be converted to 50% of
  the maximum voltage, but because of the way the phosphors and the electron
  guns in a monitor work, this may be only 22% of the maximum color intensity
  on a monitor with a gamma of 2.2. To display a pixel which is 50% of the
  maximum intensity on this monitor, we would need a voltage of 73% of the
  maximum voltage, which translates to storing a pixel value of 186.</p><p>
   The relationship between the input pixel value and the displayed intensity
  can be approximated by an exponential function<em><code> obright = ibright ^
  display_gamma</code></em> where obright is the output intensity and ibright
  is the input pixel intensity. Both values are in the range from 0 to 1 (0% to
  100%). Most monitors have a fixed gamma value in the range from 1.8 to 2.6.
  Using the above formula with display_gamma values greater than 1 means that
  the output brightness will be less than the input brightness. In order to
  have the output and input brightness be equal an overall system gamma of 1 is
  needed. To do this, we need to gamma correct the input brightness in the same
  manner as above but with a gamma value of 1/display_gamma before it is sent
  to the monitor. To correct for a display gamma of 2.2, this pre-monitor gamma
  correction uses a gamma value of 1.0/2.2 or approximately 0.45.</p><p>
   How the pre-monitor gamma correction is done depends on what hardware and
  software is being used. On Macintosh systems, the operating system has taken
  it upon itself to insulate applications from the differences in display
  hardware. Through a gamma control panel the user may be able to set the
  actual monitor gamma and Mac will then convert all pixel intensities so that
  the monitor will appear to have the specified gamma value. On Silicon
  Graphics machines, the display adapter has built-in gamma correction
  calibrated to the monitor which gives the desired overall gamma (the default
  is 1.7). Unfortunately, on PCs and most UNIX systems, it is up to the
  application to do any gamma correction needed.</p>

</div>

<div class="divh4">
<a name="target_1273"></a>
<h4>6.11.3.2&nbsp;&nbsp;Image File Gamma</h4>

  <p>Since most PC and UNIX applications and image file formats don't
  understand display gamma, they don't do anything to correct for it. As a
  result, users creating images on these systems adjust the image in such a way
  that it has the correct brightness when displayed. This means that the data
  values stored in the files are made brighter to compensate for the darkening
  effect of the monitor. In essence, the 0.45 gamma correction is built in to
  the image files created and stored on these systems. When these files are
  displayed on a Macintosh system, the gamma correction built in to the file,
  in addition to gamma correction built into MacOS, means that the image will
  be too bright. Similarly, files that look correct on Macintosh or SGI systems
  because of the built-in gamma correction will be too dark when displayed on a
  PC.</p><p>
   The PNG format files generated by POV-Ray overcome the problem of
  too much or not enough gamma correction by storing the image file gamma
  (which is 1.0/display_gamma) inside the PNG file when it is generated by
  POV-Ray. When the PNG file is later displayed by a program that has been set
  up correctly, it uses this gamma value as well as the current display gamma
  to correct for the potentially different display gamma used when originally
  creating the image.</p><p>
   Unfortunately, of all the image file formats POV-Ray supports, PNG is the
  only one that has any gamma correction features and is therefore preferred
  for images that will be displayed on a wide variety of platforms.</p>

</div>

<div class="divh4">
<a name="target_1274"></a>
<h4>6.11.3.3&nbsp;&nbsp;Scene File Gamma</h4>

  <p>The image file gamma problem itself is just a result of how scenes
  themselves are generated in POV-Ray. When you start out with a new scene and
  are placing light sources and adjusting surface textures and colors, you
  generally make several attempts before the lighting is how you like it. How
  you choose these settings depends upon the preview image or the image file
  stored to disk, which in turn is dependent upon the overall gamma of the
  display hardware being used.</p><p>
   This means that as the artist you are doing gamma correction in the POV-Ray
  scene file for your particular hardware. This scene file will generate an
  image file that is also gamma corrected for your hardware and will display
  correctly on systems similar to your own. However, when this scene is
  rendered on another platform, it may be too bright or too dim, regardless of
  the output file format used. Rather than have you change all the scene files
  to have a single fixed gamma value (heaven forbid!), POV-Ray allows you
  to specify in the scene file the display gamma of the system that the scene
  was created on.</p><p>
   The <code>assumed_gamma</code> global setting, in conjunction with the
  <code>Display_Gamma</code> INI setting lets POV-Ray know how to do gamma
  correction on a given scene so that the preview and output image files will
  appear the correct brightness on any system. Since the gamma correction is
  done internally to POV-Ray, it will produce output image files that are the
  correct brightness for the current display, regardless of what output format
  is used. As well, since the gamma correction is performed in the
  high-precision data format that POV-Ray uses internally, it produces better
  results than gamma correction done after the file is written to disk.</p><p>
   Although you may not notice any difference in the output on your system with
  and without an <code>assumed_gamma</code> setting, the assumed gamma is
  important if the scene is ever rendered on another platform.</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_236.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_238.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
