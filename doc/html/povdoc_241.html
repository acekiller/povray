<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Max_Trace_Level</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_1279"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_240.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_242.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>6.11.7&nbsp;&nbsp;Max_Trace_Level</h3>

  <p>In scenes with many reflective and transparent surfaces POV-Ray can get
  bogged down tracing multiple reflections and refractions that contribute very
  little to the color of a particular pixel. The global setting <code>
  max_trace_level</code> defines the integer maximum number of recursive levels
  that POV-Ray will trace a ray.</p>
<pre>
 global_settings { max_trace_level Level }
</pre>

  <p>This is used when a ray is reflected or is passing through a transparent
  object and when shadow rays are cast. When a ray hits a reflective surface,
  it spawns another ray to see what that point reflects. That is trace level
  one. If it hits another reflective surface another ray is spawned and it goes
  to trace level two. The maximum level by default is five.</p><p>
   One speed enhancement added to POV-Ray in version 3.0 is <em>Adaptive Depth
  Control</em> (ADC). Each time a new ray is spawned as a result of reflection
  or refraction its contribution to the overall color of the pixel is reduced
  by the amount of reflection or the filter value of the refractive surface. At
  some point this contribution can be considered to be insignificant and there
  is no point in tracing any more rays. Adaptive depth control is what tracks
  this contribution and makes the decision of when to bail out. On scenes that
  use a lot of partially reflective or refractive surfaces this can result in a
  considerable reduction in the number of rays fired and makes it safer to use
  much higher <code> max_trace_level</code> values.</p><p>
   This reduction in color contribution is a result of scaling by the
  reflection amount and/or the filter values of each surface, so a perfect
  mirror or perfectly clear surface will not be optimizable by ADC. You can see
  the results of ADC by watching the <code> Rays Saved</code> and <code>Highest
  Trace Level</code> displays on the statistics screen.</p><p>
   The point at which a ray's contribution is considered insignificant is
  controlled by the <code>adc_bailout</code> value. The default is 1/255 or
  approximately 0.0039 since a change smaller than that could not be visible in
  a 24 bit image. Generally this setting is perfectly adequate and should be
  left alone. Setting <code><a href="povdoc_235.html#target_1268">adc_bailout</a></code> to 0 will disable ADC, relying
  completely on <code> max_trace_level</code> to set an upper limit on the
  number of rays spawned.</p><p>
   If <code>max_trace_level</code> is reached before a non-reflecting surface
  is found and if ADC hasn't allowed an early exit from the ray tree the
  color is returned as black. Raise <code>max_trace_level</code> if you see
  black areas in a reflective surface where there should be a color.</p><p>
   The other symptom you could see is with transparent objects. For instance,
  try making a union of concentric spheres with a clear texture on them. Make
  ten of them in the union with radius's from 1 to 10 and render the scene.
  The image will show the first few spheres correctly, then black. This is
  because a new level is used every time you pass through a transparent
  surface. Raise <code>max_trace_level</code> to fix this problem.</p>
  <p class="Note"><strong>Note:</strong> that raising <code>max_trace_level</code> will use more memory and time
  and it could cause the program to crash with a stack overflow error, although
  ADC will alleviate this to a large extent.</p>
  <p>Values for <code>max_trace_level</code> can be set up to a maximum of 256.
  If there is no <code>max_trace_level</code> set and during rendering the default value is reached, a warning is issued.
  </p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_240.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_242.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
