<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Conditional Directives</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_680"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_170.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_172.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>6.2.6&nbsp;&nbsp;Conditional Directives</h3>

  <p>POV-Ray allows a variety of language directives to implement
  conditional parsing of various sections of your scene file. This is
  especially useful in describing the motion for animations but it has other
  uses as well. Also available is a <code><a href="#target_688">#while</a></code>
  loop directive. You may nest conditional directives 200 levels deep.</p>

</div>

<div class="divh4">
<a name="target_681"></a>
<h4>6.2.6.1&nbsp;&nbsp;The #if...#else...#end Directives</h4>
<a name="target_682"></a>


  <p>The simplest conditional directive is a traditional <code>#if</code>
  directive. It is of the form...</p>
<pre>
IF_DIRECTIVE:
    #if ( Cond ) TOKENS... [#else TOKENS...] #end
</pre>

  <p>The <em>TOKENS</em> are any number of POV-Ray keyword, identifiers, or
  punctuation and <code>(</code><em> Cond</em> <code>)</code> is a float
  expression that is interpreted as a boolean value. The parentheses are
  required. The <code>#end</code> directive is required. A value of 0.0 is
  false and any non-zero value is true.</p>
  <p class="Note"><strong>Note:</strong> extremely small values of
  about 1e-10 are considered zero in case of round off errors.</p><p> If <em>
  Cond</em> is true, the first group of tokens is parsed normally and the
  second set is skipped. If false, the first set is skipped and the second set
  is parsed. For example:</p>
<pre>
 #declare Which=1;
 #if (Which)
   box { 0, 1 }
 #else
   sphere { 0, 1 }
 #end
</pre>

  <p>The box is parsed and the sphere is skipped. Changing the value of <code>
  Which</code> to <code>0</code> means the box is skipped and the sphere is
  used. The <code>#else</code> directive and second token group is optional.
  For example:</p>
<pre>
 #declare Which=1;
 #if (Which)
   box { 0, 1 }
 #end
</pre>

  <p>Changing the value of <code>Which</code> to <code>0</code> means the box
  is removed.</p>

<p>At the beginning of the chapter &quot;Language Directives&quot; it was stated that &quot;These
   directives can appear in almost any place in the scene file....&quot;. The following is an example
   where it will not work, it will confuse the parser:</p>

<pre>
   #if( #if(yes) yes #end ) #end
</pre>

</div>

<div class="divh4">
<a name="target_683"></a>
<h4>6.2.6.2&nbsp;&nbsp;The #ifdef and #ifndef Directives</h4>
<a name="target_684"></a>


  <p>The <code>#ifdef</code> and <code>#ifndef</code> directive are similar to
  the <code>#if</code> directive however they are used to determine if an
  identifier has been previously declared.</p>
<pre>
IFDEF_DIRECTIVE:
    #ifdef ( IDENTIFIER ) TOKENS... [#else TOKENS...] #end
IFNDEF_DIRECTIVE:
    #ifndef ( IDENTIFIER ) TOKENS... [#else TOKENS...] #end
</pre>

  <p>If the <em>IDENTIFIER</em> exists then the first group of tokens is parsed
  normally and the second set is skipped. If false, the first set is skipped
  and the second set is parsed. This is especially useful for replacing an
  undefined item with a default. For example:</p>
<pre>
  #ifdef (User_Thing)
  // This section is parsed if the
  // identifier &quot;User_Thing&quot; was
  // previously declared
  object{User_Thing} // invoke identifier
 #else
  // This section is parsed if the
  // identifier &quot;User_Thing&quot; was not
  // previously declared
  box{&lt;0,0,0&gt;,&lt;1,1,1&gt;} // use a default
 #end
  // End of conditional part
</pre>

  <p>The <code>#ifndef</code> directive works the opposite. The first group is
  parsed if the identifier is <em>not</em> defined. As with the <code>
  #if</code> directive, the <code>#else</code> clause is optional and the
  <code>#end</code> directive is required.</p>

  <p>The <code>#ifdef</code> and <code>#ifndef</code> directives can be used
  to determine whether a specific element of an array has been assigned.</p>
<pre>
 #declare MyArray=array[10]
 //#declare MyArray[0]=7;
 #ifdef(MyArray[0])
    #debug &quot;first element is assigned\n&quot;
 #else 
    #debug &quot;first element is not assigned\n&quot;
 #end
</pre>

</div>

<div class="divh4">
<a name="target_685"></a>
<h4>6.2.6.3&nbsp;&nbsp;The #switch, #case, #range and #break Directives</h4>
<a name="target_686"></a>


  <p>A more powerful conditional is the <code>#switch</code> directive. The
  syntax is as follows...</p>
<pre>
SWITCH_DIRECTIVE:
   #switch ( Switch_Value ) SWITCH_CLAUSE... [#else TOKENS...] #end
SWITCH_CLAUSE:
   #case( Case_Value ) TOKENS... [#break] |
   #range( Low_Value , High_Value ) TOKENS... [#break]
</pre>

  <p>The <em>TOKENS</em> are any number of POV-Ray keyword, identifiers, or
  punctuation and <code>(</code><em> Switch_Value</em> <code>)</code> is a
  float expression. The parentheses are required. The <code>#end</code>
  directive is required. The <em>SWITCH_CLAUSE</em> comes in two varieties. In
  the <code>#case</code> variety, the float <em>Switch_Value</em> is compared
  to the float <em>Case_Value</em>. If they are equal, the condition is true.</p>
  <p class="Note"><strong>Note:</strong> that values whose difference is less than 1e-10 are considered equal in
  case of round off errors.</p>
  <p>In the <code>#range</code> variety, <em>Low_Value</em> 
  and <em>High_Value</em> are floats separated by a comma and
  enclosed in parentheses. If <em>Low_Value &lt;= Switch_Value</em> and <em>
  Switch_Value&lt;=High_Value</em> then the condition is true.</p><p>
   In either variety, if the clause's condition is true, that clause's
  tokens are parsed normally and parsing continues until a <code>#break</code>,
  <code> #else</code> or <code>#end</code> directive is reached. If the
  condition is false, POV-Ray skips until another <code>#case</code> or <code>
  #range</code> is found.</p><p>
   There may be any number of <code>#case</code> or <code> #range</code>
  clauses in any order you want. If a clause evaluates true but no <code>
  #break</code> is specified, the parsing will fall through to the next <code>
  #case</code> or <code>#range</code> and that clause conditional is evaluated.
  Hitting <code>#break</code> while parsing a successful section causes an
  immediate jump to the <code>#end</code> without processing subsequent
  sections, even if a subsequent condition would also have been satisfied.</p><p>
   An optional <code>#else</code> clause may be the last clause. It is only
  executed if the clause before it was a false clause.</p><p>
   Here is an example:</p>
<pre>
 #switch (VALUE)
  #case (TEST_1)
   // This section is parsed if VALUE=TEST_1
  #break //First case ends
  #case (TEST_2)
   // This section is parsed if VALUE=TEST_2
  #break //Second case ends
  #range (LOW_1,HIGH_1)
   // This section is parsed if (VALUE&gt;=LOW_1)&amp;(VALUE&lt;=HIGH_1)
  #break //Third case ends
  #range (LOW_2,HIGH_2)
   // This section is parsed if (VALUE&gt;=LOW_2)&amp;(VALUE&lt;=HIGH_2)
  #break //Fourth case ends
  #else
   // This section is parsed if no other case or
   // range is true.
 #end // End of conditional part
</pre>

</div>

<div class="divh4">
<a name="target_687"></a>
<h4>6.2.6.4&nbsp;&nbsp;The #while...#end Directive</h4>
<a name="target_688"></a>


  <p>The <code>#while</code> directive is a looping feature that makes it easy
  to place multiple objects in a pattern or other uses.</p>
<pre>
WHILE_DIRECTIVE:
    #while ( Cond ) TOKENS... #end
</pre>

  <p>The <em>TOKENS</em> are any number of POV-Ray keyword, identifiers, or
  punctuation marks which are the <em>body</em> of the loop. The <code>
  #while</code> directive is followed by a float expression that evaluates to a
  boolean value. A value of 0.0 is false and any non-zero value is true.</p>
  <p class="Note"><strong>Note:</strong> extremely small values of about 1e-10 are considered zero in case of
  round off errors.</p>
  <p>The parentheses around the expression are required. If the
  condition is true parsing continues normally until an <code>#end</code>
  directive is reached. At the end, POV-Ray loops back to the <code>
  #while</code> directive and the condition is re-evaluated. Looping continues
  until the condition fails. When it fails, parsing continues after the <code>
  #end</code> directive.</p>
  <p class="Note"><strong>Note:</strong> it is possible for the condition to fail the
  first time and the loop is totally skipped. It is up to the user to insure
  that something inside the loop changes so that it eventually terminates.</p>
  <p>Here is a properly constructed loop example:</p>
<pre>
 #declare Count=0;
 #while (Count &lt; 5)
  object { MyObject translate x*3*Count }
  #declare Count=Count+1;
 #end
</pre>

  <p>This example places five copies of <code>MyObject</code> in a row spaced
  three units apart in the x-direction.</p>

</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_170.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_172.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
