<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Poly Object</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_145"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_082.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_084.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>3.6.4&nbsp;&nbsp;Poly Object</h3>

<p>The polynomial object (and its &quot;shortcut&quot; versions: <code><a href="povdoc_189.html#target_854">cubic</a></code>,
<code><a href="povdoc_189.html#target_854">quartic</a></code> and <code><a href="povdoc_189.html#target_856">quadric</a></code>)
of POV-Ray is one of the most complex and
mathematical primitives of the program. One could think that it's seldom
used and more or less obsolete, but we have to remember that for example
the torus primitive is just a shortcut for the equivalent <code>quartic</code>, which
is just a shortcut for the equivalent <code>poly</code> object. Polys are, however, seldom
used in scenes due to the fact that they are so difficult to define and
it's far from trivial to get the desired shape with just a polynomial
equation. It is mostly used by the most mathematically oriented POV-Ray
users.</p>

<p>This tutorial explains the process of making a polynomial object
in POV-Ray.</p>

<p class="Note"><strong>Note:</strong> POV-Ray 3.5 includes the new <code>isosurface</code> object
which makes the polynomial object more or less obsolete. The isosurface
is more versatile (you can specify any mathematical function, not
just polynomials), easier to use. You can write the function as is,
without needing to put values in a gigantic vector. Isosurfaces
often render considerably faster than equivalent polys.</p>

<p>However, the most mathematically oriented still like polys because
isosurfaces are calculated just by approximating the right value, while
the poly is calculated in a mathematically exact way. Usually isosurfaces
are more than good enough for most applications, though.</p>

<p class="Note"><strong>Note:</strong> only a 7th degree polynomial at maximum can be represented with
the poly object. If a higher degree polynomial or other non-polynomial
function has to be represented, then it's necessary to use the isosurface
object.</p>

</div>

<div class="divh4">
<a name="target_146"></a>
<h4>3.6.4.1&nbsp;&nbsp;Creating the polynomial function</h4>

<p>The first step is to create the polynomial function to be represented.
You will need some (high-school level) mathematical knowledge for this.</p>

<p><strong>1)</strong> Let's start with an easy example: A sphere.</p>

<p>The sphere function is:</p>
  
<center><img src="images/polyfunc1.gif" alt="sphere function"><br><font size=-1><cite>sphere function</cite></font></center>


<p>Now we have to convert this to polynomial form:</p>
  
<center><img src="images/polyfunc2.gif" alt="sphere polynomial"><br><font size=-1><cite>sphere polynomial</cite></font></center>


<p>We will need a polynomial of the 2nd degree to represent this.</p>


<p><strong>2)</strong> A more elaborated example:</p>

<p>Let's take the function:</p>
  
<center><img src="images/polyfunc3.gif" alt="function"><br><font size=-1><cite>function</cite></font></center>


<p>Converting this to polynomial form we get:</p>
  
<center><img src="images/polyfunc4.gif" alt="polynomial"><br><font size=-1><cite>polynomial</cite></font></center>


<p>Altough the highest power is 4 we will need a 5th order polynomial to
represent this function (because we can't represent y<sup>4</sup>z with a
4th order polynomial).</p>

<p><strong>3)</strong> And since we talked about the torus, let's also take it as an example.</p>

<p>A torus can be represented with the function:</p>
  
<center><img src="images/polyfunc5.gif" alt="torus function"><br><font size=-1><cite>torus function</cite></font></center>

<p>where r<sub>1</sub> is the major radius and r<sub>2</sub> is the minor radius.</p>

<p>Now, this is tougher to convert to polynomial form, but finally we get:</p>
  
<center><img src="images/polyfunc6.gif" alt="torus polynomial"><br><font size=-1><cite>torus polynomial</cite></font></center>


<p>A 4th order polynomial is enough to represent this.</p>

<p class="Note"><strong>Note:</strong> not every function can be represented in polynomial form. Only
functions that use addition (and substraction), multiplication (and
division) and scalar powers (including rational powers, eg. the square root)
can be represented. Also, the poly primitive supports only
polynomials of the 7th degree at max.</p>

<p>Converting a function to polynomial form may be a very laborious task for
certain functions. Some mathematical programs are very helpful in this matter.</p>

</div>

<div class="divh4">
<a name="target_147"></a>
<h4>3.6.4.2&nbsp;&nbsp;Writing the polynomial vector</h4>

<p>Now that we have the function in polynomial form, we have to write it
in POV-Ray syntax. The syntax is specified in the in the chapters
&quot;<a href="povdoc_189.html#target_853">Poly, Cubic and Quartic</a>&quot; and
&quot;<a href="povdoc_189.html#target_856">Quadric</a>&quot; of the SDL section. There's also a table in this
chapter which we will be using to make the polynomial vector. It's most
easy to have this table printed on paper.</p>

<p class="Note"><strong>Note:</strong> It is also possible to make a little program with your favorite
programming language which will print the poly vector from the polynomial
function, but making a program like this is up to you.</p>

<p><STRONG>1)</STRONG> Let's start with the easy one, ie. the sphere.</p>

<p>Since the sphere can be represented with a polynomial of 2nd degree, we
look at the row titled &quot;2nd&quot; in the table. We see that it has 10 items,
ie. we need a vector of size 10. Each item of the vector will be the factor
of the term listed in the table.</p>

<p>The polynomial was:</p>
  
<center><img src="images/polyfunc2.gif" alt="sphere polynomial"><br><font size=-1><cite>sphere polynomial</cite></font></center>


<p>Writing the poly in this way we get:</p>

<pre>
#declare Radius=1;
poly
{ 2,
  &lt;1,0,0,0,1,
   0,0,1,0,-Radius*Radius&gt;
}
</pre>

<p>Put each group of factors (separated with lines in the table) in their
own lines.</p>

<p>In the table we see that the first item is the factor for x<sup>2</sup>,
which is 1 in the function. The next item is xy. Since it isn't in the
function, its factor is 0. Likewise the next item, which is xz. And so on.
The last item is the scalar term, which is in this case -r<sup>2</sup>.</p>

<p>If we make a proper scene and render it, we get:</p>

<pre>
camera { location y*4-z*5 look_at 0 angle 35 }
light_source { &lt;100,200,-50&gt; 1 }
background { rgb &lt;0,.25,.5&gt; }

#declare Radius=1;
poly
{ 2,
  &lt;1,0,0,0,1,
   0,0,1,0,-Radius*Radius&gt;
  pigment { rgb &lt;1,.7,.3&gt; } finish { specular .5 }
}
</pre>


  
<center><img src="images/polypic1.jpg" alt="Sphere polynomial"><br><font size=-1><cite>Sphere polynomial</cite></font></center>


<p class="Note"><strong>Note:</strong> there's a shortcut for 2nd degree polynomials: The 
<code><a href="povdoc_189.html#target_856">quadric</a></code>
primitive. Using a shortcut version, whenever possible, can lead to faster
renderings. We can write the sphere code described above in the following
way:</p>

<pre>
quadric
{ &lt;1,1,1&gt;, &lt;0,0,0&gt;, &lt;0,0,0&gt;, -Radius*Radius
  pigment { rgb &lt;1,.7,.3&gt; } finish { specular .5 }
}
</pre>

<p><strong>2)</strong> Now lets try the second one. We do it similarly, but this time we need
to look at the row titled &quot;5th&quot; in the table.</p>

<p>The polynomial was:</p>
  
<center><img src="images/polyfunc4.gif" alt="5th order polynomial"><br><font size=-1><cite>5th order polynomial</cite></font></center>


<p>Writing the poly primitive we get:</p>
<pre>
poly
{ 5,
  &lt;0,0,0,0,0,
   0,0,0,0,0,
   0,0,0,0,0,
   0,0,0,1,0,
   0,0,0,0,0,
   -2,0,0,0,0,
   0,0,0,0,0,
   0,1,0,0,0,
   0,0,0,0,0,
   0,0,0,0,0,
   0,0,0,0,0,0&gt;
}
</pre>

<p>With the proper scene we get:</p>
<pre>
camera { location &lt;8,20,-10&gt;*.7 look_at x*.01 angle 35 }
light_source { &lt;100,200,20&gt; 1 }
background { rgb &lt;0,.25,.5&gt; }

poly
{ 5,
  &lt;0,0,0,0,0,
   0,0,0,0,0,
   0,0,0,0,0,
   0,0,0,1,0,
   0,0,0,0,0,
   -2,0,0,0,0,
   0,0,0,0,0,
   0,1,0,0,0,
   0,0,0,0,0,
   0,0,0,0,0,
   0,0,0,0,0,0&gt;
  clipped_by { box { &lt;-4,-4,-1&gt;&lt;4,4,1&gt; } }
  bounded_by { clipped_by }
  pigment { rgb &lt;1,.7,.3&gt; } finish { specular .5 }
  rotate &lt;0,90,-90&gt;
}
</pre>

  
<center><img src="images/polypic2.jpg" alt="5th order polynomial example"><br><font size=-1><cite>5th order polynomial example</cite></font></center>



<p><strong>3)</strong> And finally the torus:</p>

<p>The polynomial was:</p>
  
<center><img src="images/polyfunc6.gif" alt="torus polynomial"><br><font size=-1><cite>torus polynomial</cite></font></center>


<p>And we get the proper 4th degree poly primitive:</p>
<pre>
camera { location y*4-z*5 look_at 0 angle 35 }
light_source { &lt;100,200,-50&gt; 1 }
background { rgb &lt;0,.25,.5&gt; }

#declare r1=1;
#declare r2=.5;
poly
{ 4,
  &lt;1,0,0,0,2,
   0,0,2,0,-2*(r1*r1+r2*r2),
   0,0,0,0,0,
   0,0,0,0,0,
   1,0,0,2,0,
   2*(r1*r1-r2*r2),0,0,0,0,
   1,0,-2*(r1*r1+r2*r2),0,pow(r1,4)+pow(r2,4)-2*r1*r1*r2*r2&gt;
  pigment { rgb &lt;1,.7,.3&gt; } finish { specular .5 }
}
</pre>

<p>When rendered we get:</p>

  
<center><img src="images/polypic3.jpg" alt="Torus polynomial"><br><font size=-1><cite>Torus polynomial</cite></font></center>



<p>There's a shortcut for 4th order polynomials: The 
<code><a href="povdoc_189.html#target_854">quartic</a></code> primitive.
We can write the torus like this:</p>

<pre>
quartic
{ &lt;1,0,0,0,2,
   0,0,2,0,-2*(r1*r1+r2*r2),
   0,0,0,0,0,
   0,0,0,0,0,
   1,0,0,2,0,
   2*(r1*r1-r2*r2),0,0,0,0,
   1,0,-2*(r1*r1+r2*r2),0,pow(r1,4)+pow(r2,4)-2*r1*r1*r2*r2&gt;
  pigment { rgb &lt;1,.7,.3&gt; } finish { specular .5 }
}
</pre>


</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_082.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_084.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
