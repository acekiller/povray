<!------------------------------------------------------------------------------->
<!--              Generated by makedocs.pl version 1.0 rev 20                  -->
<!--              This file Copyright (c) POV-Team 1991-2002                   -->
<!-- You can override our stylesheet settings by placing a 'povray35.css' file -->
<!--    in the root directory of the disk volume that holds this help file.    -->
<!------------------------------------------------------------------------------->
<html>
<head>
<title>Density</title>
<link rel="stylesheet" type="text/css" href="../povray35.css">
<link rel="stylesheet" type="text/css" href="file:///povray35.css">
<object id=htmlhelp type="application/x-oleobject" classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11"></object>
<script language=javascript src="../povray35.js"></script>
</head>
<a name="target_1202"></a>
<body>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_220.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_222.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
<div class="divh3">
<h3>6.8.3&nbsp;&nbsp;Density</h3>

  <p>Particles of media are normally distributed in constant density throughout
  the media. However the <code>density</code> statement allows you to vary the
  density across space using any of POV-Ray's pattern functions such as
  those used in textures. If no <code>density</code> statement is given then
  the density remains a constant value of 1.0 throughout the media. More than
  one <code>density</code> may be specified per <code>media</code> statement.
  See &quot;<a href="#target_1208">Multiple Density vs. Multiple Media</a>&quot;.
  The syntax for <code>density</code> is:</p>
<pre>
DENSITY:
    density
    {
        [DENSITY_IDENTIFIER]
        [DENSITY_TYPE]
        [DENSITY_MODIFIER...]
    }
DENSITY_TYPE:
    PATTERN_TYPE | COLOR 
DENSITY_MODIFIER:
    PATTERN_MODIFIER | DENSITY_LIST | color_map { COLOR_MAP_BODY } |
    colour_map { COLOR_MAP_BODY } | density_map { DENSITY_MAP_BODY }
</pre>

  <p>The <code>density</code> statement may begin with an optional density
  identifier. All subsequent values modify the defaults or the values in the
  identifier. The next item is a pattern type. This is any one of POV-Ray's
  pattern functions such as <code><a href="povdoc_216.html#target_1094">bozo</a></code>, <code><a href="povdoc_216.html#target_1141">wood</a></code>,
  <code><a href="povdoc_216.html#target_1116">gradient</a></code>, <code><a href="povdoc_216.html#target_1140">waves</a></code>,
  etc. Of particular usefulness are the <code><a href="povdoc_216.html#target_1135">spherical</a></code>, 
  <code><a href="povdoc_216.html#target_1128">planar</a></code>, <code> <a href="povdoc_216.html#target_1101">cylindrical</a></code>, and <code><a href="povdoc_216.html#target_1093">boxed</a></code> 
  patterns which were previously available only for use with our discontinued 
  <code>halo</code> feature. All patterns return a value from 0.0 to 1.0. 
  This value is interpreted as the density of the media at that particular 
  point. See &quot;<a href="povdoc_216.html#target_1089">Patterns</a>&quot; for details on particular pattern types. 
  Although a solid <em>COLOR</em> pattern is legal, in general it is used 
  only when the <code>density</code> statement is inside a <code>density_map</code>.</p>

</div>

<div class="divh4">
<a name="target_1203"></a>
<h4>6.8.3.1&nbsp;&nbsp;General Density Modifiers</h4>

  <p>A <code>density</code> statement may be modified by any of the general
  pattern modifiers such as transformations, <code>turbulence</code> and <code>
  warp</code>. See &quot;<a href="povdoc_217.html#target_1143">Pattern Modifiers</a>&quot; for details. In addition there
  are several density-specific modifiers which can be used.</p>

</div>

<div class="divh4">
<a name="target_1204"></a>
<h4>6.8.3.2&nbsp;&nbsp;Density with color_map</h4>

<a name="target_1205"></a>
  <p>Typically a <code>media</code> uses just one constant color throughout.
  Even if you vary the density, it is usually just one color which is specified
  by the <code>absorption</code>, <code>emission</code>, or <code>
  scattering</code> keywords. However when using <code>emission</code> to
  simulate fire or explosions, the center of the flame (high density area) is
  typically brighter and white or yellow. The outer edge of the flame (less
  density) fades to orange, red, or in some cases deep blue. To model the
  density-dependent change in color which is visible, you may specify a <code>
  color_map</code>. The pattern function returns a value from 0.0 to 1.0 and
  the value is passed to the color map to compute what color or blend of colors
  is used. See &quot;<a href="povdoc_206.html#target_1005">Color Maps</a>&quot; for details on how pattern values work
  with <code>color_map</code>. This resulting color is multiplied by the <code>
  absorption</code>, <code>emission</code> and <code> scattering</code> color.
  Currently there is no way to specify different color maps for each media type
  within the same <code>media</code> statement.</p><p>
   Consider this example:</p>
<pre>
  media{
    emission 0.75
    scattering {1, 0.5}
    density { spherical
      color_map {
        [0.0 rgb &lt;0,0,0.5&gt;]
        [0.5 rgb &lt;0.8, 0.8, 0.4&gt;]
        [1.0 rgb &lt;1,1,1&gt;]
      }
    }
  }
</pre>

  <p>The color map ranges from white at density 1.0 to bright yellow at density
  0.5 to deep blue at density 0. Assume we sample a point at density 0.5. The
  emission is 0.75*&lt;0.8,0.8,0.4&gt; or &lt;0.6,0.6,0.3&gt;. Similarly the
  scattering color is 0.5*&lt;0.8,0.8,0.4&gt; or &lt;0.4,0.4,0.2&gt;.</p><p>
   For block pattern types <code>checker</code>, <code> hexagon</code>, and
  <code> brick</code> you may specify a color list such as this:</p>
<pre>
  density{
    checker 
    density {rgb&lt;1,0,0&gt;}
    density {rgb&lt;0,0,0&gt;}
  }
</pre>

  <p>See &quot;<a href="povdoc_206.html#target_1004">Color List Pigments</a>&quot;
  which describes how <code>pigment</code> uses a color list. The same principles
  apply when using them with <code>density</code>.</p>

</div>

<div class="divh4">
<a name="target_1206"></a>
<h4>6.8.3.3&nbsp;&nbsp;Density Maps and Density Lists</h4>

<a name="target_1207"></a>

  <p>In addition to specifying blended colors with a color map you may create a
  blend of densities using a <code>density_map</code>. The syntax for a density
  map is identical to a color map except you specify a density in each map
  entry (and not a color).</p><p>
   The syntax for <code>density_map</code> is as follows:</p>
<pre>
DENSITY_MAP:
    density_map { DENSITY_MAP_BODY }
DENSITY_MAP_BODY:
    DENSITY_MAP_IDENTIFIER | DENSITY_MAP_ENTRY...
DENSITY_MAP_ENTRY:
    [ Value DENSITY_BODY ]
</pre>

  <p>Where <em><code>Value</code></em> is a float value between 0.0 and 1.0
  inclusive and each <em>DENSITY_BODY</em> is anything which can be inside a
  <code>density{...}</code> statement. The <code>density</code> keyword and
  <code>{}</code> braces need not be specified.</p>
  <p class="Note"><strong>Note:</strong> the <code>[]</code> brackets are part of the actual <em>
  DENSITY_MAP_ENTRY</em>. They are not notational symbols denoting optional
  parts. The brackets surround each entry in the density map.</p><p> There may be from
  2 to 256 entries in the map.</p><p>
   Density maps may be nested to any level of complexity you desire. The
  densities in a map may have color maps or density maps or any type of density
  you want.</p><p>
  Entire densities may also be used with the block patterns such as <code>
  checker</code>, <code>hexagon</code> and <code>brick</code>. For
  example...</p>
<pre>
  density {
    checker
    density { Flame scale .8 }
    density { Fire scale .5 }
  }
</pre>

  <p class="Note"><strong>Note:</strong> in the case of block patterns the <code>density</code> wrapping
  is required around the density information.</p><p>
   A density map is also used with the <code>average</code> density type. See
  &quot;<a href="povdoc_216.html#target_1092">Average</a>&quot; for details.</p><p>
  You may declare and use density map identifiers but the only way to declare a
  density block pattern list is to declare a density identifier for the entire
  density.</p>

</div>

<div class="divh4">
<a name="target_1208"></a>
<h4>6.8.3.4&nbsp;&nbsp;Multiple Density vs. Multiple Media</h4>

  <p>It is possible to have more than one <code>media</code> specified per
  object and it is legal to have more than one <code>density</code> per <code>
  media</code>. The effects are quite different. Consider this example:</p>
<pre>
  object {
    MyObject
    pigment { rgbf 1 }
    interior {
      media {
        density { Some_Density }
        density { Another_Density }
      }
    }
  }
</pre>

  <p>As the media is sampled, calculations are performed for each density
  pattern at each sample point. The resulting samples are multiplied together.
  Suppose one density returned <code>rgb&lt;.8,.8,.4&gt;</code> and the other
  returned <code>rgb&lt;.25,.25,0&gt;</code>. The resulting color is <code>
  rgb&lt;.2,.2,0&gt;</code>.</p>
  <p class="Note"><strong>Note:</strong>  in areas where one density returns zero,
  it will wipe out the other density. The end result is that only density areas
  which overlap will be visible. This is similar to a CSG intersection
  operation. Now consider</p>
<pre>
  object { 
    MyObject
    pigment { rgbf 1 }
    interior {
      media {
        density { Some_Density }
      }
      media {
        density { Another_Density }
      }
    }
  }
</pre>

  <p>In this case each media is computed independently. The resulting colors
  are added together. Suppose one density and media returned <code>
  rgb&lt;.8,.8,.4&gt;</code> and the other returned <code>
  rgb&lt;.25,.25,0&gt;</code>. The resulting color is <code>
  rgb&lt;1.05,1.05,.4&gt;</code>. The end result is that density areas which
  overlap will be especially bright and all areas will be visible. This is
  similar to a <a href="povdoc_192.html#target_906">CSG</a> <a href="povdoc_192.html#target_908">union</a> operation.
  See the sample scene <code>scenes\interior\media\media4.pov</code> for an example
  which illustrates this.</p>


</div>
</div>

<p>
<center>
<table width=100% border=0>
<tr>
<td>
<table width=100% align="center" border=0 bgcolor="#ffcc99" class="NavBar">
<tr>
<td align="left">&lt;<a href="povdoc_220.html">Prev</a></td>
<script language="JavaScript">
<!--
if (navigator.userAgent.indexOf ("MSIE 3.") >= 1)
  document.write ("<td align=center><small><i>You are running <b>IE3</b>. This will likely cause problems with this help file.</i></small></td>") ;
else if (navigator.userAgent.indexOf ("MSIE 4.") >= 1)
  document.write ("<td align=center><small><i>The Microsoft HTML Help system works best with <b>IE5</b> or later. We recommend you upgrade.</i></small></td>") ;
//-->
</script>
<td align="right"><a href="povdoc_222.html">Next</a>&gt;</td></tr>
</table>
</td>
</tr>
</table>
</center>
</body>
</html>
